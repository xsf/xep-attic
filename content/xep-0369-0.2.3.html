<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0369: Mediated Information eXchange (MIX)</title><link rel="stylesheet" type="text/css" href="xmpp.css" /><link href="prettify.css" type="text/css" rel="stylesheet" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><script type="text/javascript" src="prettify.js"></script><meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=2.0" /><meta name="DC.Title" content="Mediated Information eXchange (MIX)" /><meta name="DC.Creator" content="Kevin Smith" /><meta name="DC.Creator" content="Steve Kille" /><meta name="DC.Creator" content="Peter Saint-Andre" /><meta name="DC.Description" content="This document defines Mediated Information eXchange (MIX), an XMPP protocol extension for the exchange of information among multiple users through a mediating service. The protocol can be used to model group communication applications such as chatrooms, although with greater flexibility and extensibility than existing groupchat technologies such as Multi-User Chat (MUC). MIX supports standard groupchat features such as discussion topics and invitations, and  defines a strong access control model similar to that of MUC. MIX also enables users to participate without sharing presence, allows communication of any structured data (not only textual messages).  MIX uses Publish-Subscribe to provide flexible access and publication, and uses Message Archive Management (MAM) to provide storage and archiving. " /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2016-09-01" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0369" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright &#xA9; 1999 - 2016 by the XMPP Standards Foundation (XSF)." /></head><body onload="prettyPrint()"><h1>XEP-0369: Mediated Information eXchange (MIX)</h1><table><tr valign="top"><td><strong>Abstract:</strong></td><td>This document defines Mediated Information eXchange (MIX), an XMPP protocol extension for the exchange of information among multiple users through a mediating service. The protocol can be used to model group communication applications such as chatrooms, although with greater flexibility and extensibility than existing groupchat technologies such as Multi-User Chat (MUC). MIX supports standard groupchat features such as discussion topics and invitations, and  defines a strong access control model similar to that of MUC. MIX also enables users to participate without sharing presence, allows communication of any structured data (not only textual messages).  MIX uses Publish-Subscribe to provide flexible access and publication, and uses Message Archive Management (MAM) to provide storage and archiving. </td></tr><tr valign="top"><td><strong>Authors:</strong></td><td>Kevin Smith, Steve Kille, Peter Saint-Andre</td></tr><tr valign="top"><td><strong>Copyright:</strong></td><td>© 1999 - 2016 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</td></tr><tr valign="top"><td><strong>Status:</strong></td><td>Experimental</td></tr><tr valign="top"><td><strong>Type:</strong></td><td>Standards Track</td></tr><tr valign="top"><td><strong>Version:</strong></td><td>0.2.3</td></tr><tr valign="top"><td><strong>Last Updated:</strong></td><td>2016-09-01</td></tr></table><hr /><p style="color:red">WARNING: This Standards-Track document is Experimental. Publication as an XMPP Extension Protocol does not imply approval of this proposal by the XMPP Standards Foundation. Implementation of the protocol described herein is encouraged in exploratory implementations, but production systems are advised to carefully consider whether it is appropriate to deploy implementations of this protocol before it advances to a status of Draft.</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#intro">Introduction</a><br />2.  <a href="#reqs">Requirements</a><br />3.  <a href="#reqs">Concepts</a><br />   
      3.1.  <a href="#concepts-pubsub">MIX and PubSub</a><br />   
      3.2.  <a href="#concepts-mam">MIX and MAM</a><br />   
      3.3.  <a href="#concepts-delivery">Delivering Messages to Users</a><br />   
      3.4.  <a href="#concepts-presence">User Presence in MIX</a><br />   
      3.5.  <a href="#proxy-jid">Proxy JIDs and JID Visibility</a><br />   
      3.6.  <a href="#concepts-nodes">Standard Nodes</a><br />      
      3.6.1.  <a href="#messages-node">Messages Node</a><br />      
      3.6.2.  <a href="#subject-node">Subject Node</a><br />      
      3.6.3.  <a href="#participants-node">Participants Node</a><br />      
      3.6.4.  <a href="#jid-map-node">JID Map Node</a><br />      
      3.6.5.  <a href="#presence-node">Presence Node</a><br />      
      3.6.6.  <a href="#config-node">Configuration Node</a><br />      
      3.6.7.  <a href="#acl-node">ACL Node</a><br />4.  <a href="#discovery">Discovery</a><br />   
      4.1.  <a href="#disco-service">Discovering a MIX service</a><br />   
      4.2.  <a href="#disco-channel-list">Discovering the Channels on a Service</a><br />   
      4.3.  <a href="#disco-channel-info">Discovering Channel Information</a><br />   
      4.4.  <a href="#disco-channel-nodes">Discovering Nodes at a Channel</a><br />   
      4.5.  <a href="#disco-channel-participants">Discovering Participants in a Channel</a><br />5.  <a href="#usecases">Use Cases</a><br />   
      5.1.  <a href="#usecases-user">Common User Use Cases</a><br />      
      5.1.1.  <a href="#usecase-user-join">Joining a Channel</a><br />      
      5.1.2.  <a href="#usecase-visibilty-pref">User Preferences and Additional Information</a><br />      
      5.1.3.  <a href="#usecase-user-leaving">Leaving a Channel</a><br />      
      5.1.4.  <a href="#usecase-setting-nick">Setting a Nick</a><br />      
      5.1.5.  <a href="#usecase-user-register">Registering a Nick</a><br />      
      5.1.6.  <a href="#usecase-user-presence">Setting User Presence</a><br />      
      5.1.7.  <a href="#usecase-obtaining-presence">Coming Online: Obtaining Presence</a><br />      
      5.1.8.  <a href="#usecase-real-jids">Determining Real JIDs</a><br />      
      5.1.9.  <a href="#usecase-sync-history">Coming Online: Synchronizing Message History</a><br />      
      5.1.10.  <a href="#usecase-user-offline">Going Offline</a><br />      
      5.1.11.  <a href="#usecase-user-message">Sending a Message</a><br />      
      5.1.12.  <a href="#usecase-retract">Retracting a Message</a><br />      
      5.1.13.  <a href="#usecase-user-invite">Inviting another user to join a Channel</a><br />      
      5.1.14.  <a href="#usecase-user-private-messages">Sending Private Messages</a><br />      
      5.1.15.  <a href="#usecase-vcard">Requesting vCard</a><br />   
      5.2.  <a href="#use-mam">Use of MAM</a><br />   
      5.3.  <a href="#usecases-admin">Administrative Use Cases</a><br />      
      5.3.1.  <a href="#usecase-admin-check-create">Checking For Permission To Create a Channel</a><br />      
      5.3.2.  <a href="#usecase-admin-create">Creating a Channel</a><br />      
      5.3.3.  <a href="#usecase-admin-create-adhoc">Creating a Channel for Ad Hoc User</a><br />      
      5.3.4.  <a href="#usecase-admin-">Configuring a Channel</a><br />      
      5.3.5.  <a href="#usecase-admin-destroy">Destroying a Channel</a><br />      
      5.3.6.  <a href="#usecase-server-destroy">Server Destroying a Channel</a><br />      
      5.3.7.  <a href="#usecase-admin-affiliations">Modifying User Affiliations</a><br />      
      5.3.8.  <a href="#usecase-admin-kick">Removing a User From a Channel (Kicking)</a><br />6.  <a href="#not-included-from45">Capabilities not provided in MIX</a><br />   
      6.1.  <a href="#password-control">Password Controlled Channels</a><br />   
      6.2.  <a href="#chat-conversion">Conversion from 1:1 Chat</a><br />   
      6.3.  <a href="#voice-control">Voice Control</a><br />7.  <a href="#i18n">Internationalization Considerations</a><br />8.  <a href="#security">Security Considerations</a><br />9.  <a href="#iana">IANA Considerations</a><br />10.  <a href="#registrar">XMPP Registrar Considerations</a><br />11.  <a href="#schema">XML Schema</a><br />12.  <a href="#ack">Acknowledgements</a></p><p><a href="#appendices">Appendices</a><br />    <a href="#appendix-docinfo">A: Document Information</a><br />    <a href="#appendix-authorinfo">B: Author Information</a><br />    <a href="#appendix-legal">C: Legal Notices</a><br />    <a href="#appendix-xmpp">D: Relation to XMPP</a><br />    <a href="#appendix-discuss">E: Discussion Venue</a><br />    <a href="#appendix-conformance">F: Requirements Conformance</a><br />    <a href="#appendix-notes">G: Notes</a><br />    <a href="#appendix-revs">H: Revision History</a></p></div><hr /><h2>1.
       <a name="intro" id="intro">Introduction</a></h2>
  <p>The Mediated Information eXchange (MIX) protocol is intended as a replacement for Multi-User Chat (MUC). MUC is a major application of XMPP that was developed in 2002 and standardized in <span class="ref"><a href="http://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idp649040">1</a>]. MIX implements the same basic MUC patterns in a more flexible and extensible way in order to address requirements that have emerged since MUC was developed. MIX supports all of the core chatroom features that are familiar from MUC, such as discussion topics and invitations. Like MUC, it also defines a strong access control model, including the ability to kick and ban users, to name administrators, and to require membership in order to participate in channels.</p>
  <p>Several reasons exist for replacing MUC:</p>
  <ul>
    <li>A number of use cases for group communication have emerged since MUC was first published.</li>
    <li>Experience has shown that it is difficult to use MUC to build several kinds of communication applications (such as a multimedia conference focus) without undesirable adaptations.</li>
    <li>It is impractical to address a number of the requirements listed in the next section with MUC or with extensions to MUC. </li>
    <li>In the years after MUC was designed, both <span class="ref"><a href="http://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idp654640">2</a>] and <span class="ref"><a href="http://xmpp.org/extensions/xep-0313.html">Message Archive Management (XEP-0313)</a></span>  [<a href="#nt-idp1532720">3</a>] have been developed and it is desirable to reuse these building blocks (e.g., MAM can be used for message history) rather than using the less robust methods defined in <span class="ref"><a href="http://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idp652624">4</a>].</li>
  </ul>
  <p>Because it is anticipated that there will significant co-existence between MUC and MIX, this specification is designed so that:</p>
  <ul>
    <li>XMPP clients can implement MUC and this specification in a way that provides a coherent user experience.</li>
    <li>XMPP servers can implement this specification and also provide a MUC interface in order to support clients that only implement MUC.</li>
  </ul>
  <p>If a server wishes to expose both MUC and MIX representations of chatrooms, it is recommended to do so by serving MUC and MIX on different domains, but a server MAY serve them on the same domain. The MIX service SHOULD include a reference to the MUC mirror, so that clients understanding both protocols can choose to show only one copy of the service.</p>
<h2>2.
       <a name="reqs" id="reqs">Requirements</a></h2>
  <ul>
    <li>A user's participation in a channel persists and is not modified by the user's client going online and offline.</li>
    <li>Multiple devices associated with the same account can share the same nick in the channel, with well-defined rules making each client individually addressable.</li>
    <li>Channels are not required to support or reflect presence for participants.</li>
    <li>A reconnecting client can quickly resync with respect to messages and presence.</li>
    <li>A user may (subject to configuration) receive messages from a channel as an invisible observer.</li>
    <li>Configuration can be observed externally to the channel (e.g., list of participants, access control rights, etc.).</li>
    <li>MIX services should provide mechanisms to prevent JIDs from being harvested.</li>
    <li>MIX and Message Archive Management (MAM) should work well together.</li>
    <li>A user can determine which channels they participate in.</li>
    <li>Provide extensibility regarding data formats that can be sent within a channel (files, structured data, indications about media sources in multimedia conferences, etc.) as well as flexibility regarding which data formats a user wants to receive.</li>
    <li>Enable federation of a channel across multiple servers, to provide a service equivalent to "federated MUC" <span class="ref"><a href="http://xmpp.org/extensions/xep-0289.html">Federated MUC for Constrained Environments (XEP-0289)</a></span>  [<a href="#nt-idp1546224">5</a>].</li>
    <li>(Desirable) Make it easier to reduce duplicate traffic.</li>
 </ul>
<h2>3.
       <a name="reqs" id="reqs">Concepts</a></h2>
  <p>The following concepts underlie the design of MIX.</p>
  <ul>
    <li>MIX channels (roughly equivalent to MUC rooms) are hosted on one or more MIX domains, (examples: `mix.example.com`; 'conference.example.com'; 'talk.example.com'), which are discoverable through <span class="ref"><a href="http://xmpp.org/extensions/xep-0030.html">Service Discovery (XEP-0030)</a></span>  [<a href="#nt-idp1555952">6</a>]. Each channel on a MIX service may then be discovered and queried.</li>
    <li> In MIX each channel (e.g., `channel@mix.example.com`) is a pubsub service. This is based on the model from <span class="ref"><a href="http://xmpp.org/extensions/xep-0163.html">Personal Eventing Protocol (XEP-0163)</a></span>  [<a href="#nt-idp1551456">7</a>] where every user JID (e.g., `user@example.com`) is its own pubsub service. </li>
    <li>A channel's pubsub service contains a number of nodes for different event types or data formats. As described below, this document defines several standard nodes; however, future specifications or proprietary services can define their own nodes for extensibility.</li>
    <li>Affiliations with the nodes are managed by the MIX service by channel level operations, so that the user does not have to separately manage affiliations with the individual PubSub nodes.
     </li>
    <li><span class="ref"><a href="http://xmpp.org/extensions/xep-0313.html">Message Archive Management (XEP-0313)</a></span>  [<a href="#nt-idp1553392">8</a>] (MAM) is used for all history access, with each node being individually addressable for MAM queries. This simplifies implementation compared to MUC (which had a specialized and rather limited history retrieval mechanism).</li>
    <li>A client can achieve a 'quick resync' of a node by requesting just those changes it has not yet received, using standard MAM protocol. This solves the old MUC issue of either receiving duplicate messages when rejoining a room or potentially missing messages.</li>
    <li>Because MAM is used for history, only those nodes that have a 'current value' need to store any items in them — e.g., 'urn:xmpp:mix:nodes:presence' and 'urn:xmpp:mix:nodes:subject' would store their current values (with older values being queryable through MAM), while 'urn:xmpp:mix:nodes:messages' would store no items.</li>
    <li>A user's participation in a channel outlives their session. A user who is offline will not share presence within the channel, but will still be listed as an participant. This too is a significant departure from MUC.</li>
    <li>MIX decouples addressing of occupants from their nicknames, so that nickname changes do not affect addressing.</li>
    <li>Each participant is addressable by a single bare JID, which is a proxy JID (not the user's real JID) to make it straightforward to hide the user's real JID from other channel participants. Full JIDs comprised of this bare JID plus a resource are then constructed, allowing visibility into the number of online resources participating in a channel.</li>
  </ul>
  <div class="indent"><h3>3.1 <a name="concepts-pubsub" id="concepts-pubsub">MIX and PubSub</a></h3>
    <p>MIX is based upon domains providing a MIX service, such as `mix.shakespeare.example`. Note that although PubSub communication is used, a domain used for MIX is a MIX domain and not a standard <span class="ref"><a href="http://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idp569120">9</a>] domain. Like MUC, there is no requirement on the naming of these domains; the label 'mix' and the fact that it is a subdomain of a 'shakespeare.example' service are purely for example.</p>
    <p>Every MIX channel is an addressable PubSub service (with additional MIX semantics) that will be addressed by an XMPP client using a bare JID, for example coven@mix.shakespeare.example. While <span class="ref"><a href="http://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idp1575632">10</a>] is used as the basis for the MIX model, MIX uses standard presence and groupchat messages to provide an interface to the MIX service that does not expose PubSub for many of the more common functions.
</p>
  </div>
  <div class="indent"><h3>3.2 <a name="concepts-mam" id="concepts-mam">MIX and MAM</a></h3>
    <p>Message Archive Management is used for all storage of historical data (such as the history of messages sent within the channel). Each node can be archived separately (e.g., the presence node or the configuration node). MIX clients can retrieve archived information with MAM in order to quickly resync messages with regard to a channel, and may do so without providing presence information.</p>
  </div>
  <div class="indent"><h3>3.3 <a name="concepts-delivery" id="concepts-delivery">Delivering Messages to Users</a></h3>
     <p>
       The primary model is that a user will join a channel over an extended period, and that the user (not a specific client used by the user) joins the channel. The primary subscription is with the client's bare JID. The user will receive messages from the channel and/or access channel presence from time to time with one or more clients.
     </p>
    <p>
      Where a user has no clients active, the approach expected by MIX is that messages will be archived using MAM and that when clients come online they will use MAM to access messages that have not been delivered to the client.   Following the rules of <span class="ref"><a href="http://tools.ietf.org/html/rfc6121">RFC 6121</a></span>  [<a href="#nt-idp1583312">11</a>], arriving MIX messages (which will be of type=groupchat) will be discarded if all clients are offline. Offline messages are not used with MIX.
    </p>
    <p>
      Online clients are handled use <span class="ref"><a href="http://xmpp.org/extensions/xep-0376.html">Pubsub Account Management (XEP-0376)</a></span>  [<a href="#nt-idp1586032">12</a>].
      The model is that the server will know which of the user's clients are interested in MIX messages, possibly filtered by MIX channel, and will deliver messages appropriately to these clients. MIX will send messages to the user's server addressed with the bare JID of the user. The user's server will then deliver messages to the user's clients, in a manner that is transparent to the MIX server. The same approach is used for sending presence updates to the user, noting that presence information is distributed by a channel to the bare JID of subscribers and then the user's server will distribute to clients as appropriate.
    </p>
  </div>
  <div class="indent"><h3>3.4 <a name="concepts-presence" id="concepts-presence">User Presence in MIX</a></h3>
    <p>
      MIX channels store presence in the presence node using the proxy JID of each online client for a user.   User presence may be included for all or selected clients of a given user, based on client choice to publish presence.    Where a user publishes presence for multiple clients, this information is available to all users subscribing to the channel presence. Queries such as disco requests will be directed to a specific client, routing through the MIX channel, while private messaging will be addressed to the user's bare proxy JID, and routed by the MIX to the user's bare real JID, where standard distribution rules will apply.
    </p>
    <p>
      Presence updates are distributed by a channel to the bare JID of subscribers and then the subscriber's server will distribute to each of the subscriber's currently online clients.
    </p>
  </div>
  <div class="indent"><h3>3.5 <a name="proxy-jid" id="proxy-jid">Proxy JIDs and JID Visibility</a></h3>
    <p>
      MIX channels have two modes controlling JID visibility:
    </p>
    <ul>
      <li>'JID Visible': In these channels, some or all participant JIDs are visible to all channel members.</li>
      <li>'JID Hidden': In these channels, no participant JIDs are visible to channel members, but they are visible to channel administrators.</li>
    </ul>
    <p>
      A channel member may specify their preferences for JID visibility, with one of the following values:
    </p>
    <ul>
      <li>'No JID Visibility Preference': The users JID will be visible in JID Visible channels and hidden in JID Hidden channels.</li>
      <li>'Prefer Hidden': The user's JID will be hidden in JID Visible channels if the channel policy allows this.</li>
      <li>'Enforce Hidden': The user's JID will never be shown and the user will be removed from channel if channel administrator enforces visibility.</li>
      <li>'Enforce Visible': The users JID will always be shown and the user will be removed from channel if mode is changed to 'JID Hidden'.</li>
    </ul>
    <p>
      The primary representation of a participant in a MIX channel is a proxy JID, which is an anonymized JID using the same domain as the channel and with the name of the channel encoded, using the format "&lt;channel&gt;+&lt;generated identifier&gt;@&lt;mix domain&gt;".   For example in the channel 'coven@mix.shakespeare.example',   the user 'hag66@shakespeare.example' might have a proxy JID of 'coven+123456@mix.shakespeare.example'.   The reason for the proxy JID is to support JID Hidden channels.   Proxy JIDs are also used in JID Visible channels, for consistency and to enable switching of JID visibility.  The "urn:xmpp:mix:nodes:jidmap" node maps from proxy JID to real JID.
    </p>
     <p>
       The full JIDs held in presence are anonymized using a similar mechanism.  First the bare JID is mapped to a bare proxy JID, using the mapping held in the "urn:xmpp:mix:nodes:jidmap" node for the bare JID.  Then the resource is replaced with a generated value.   For example,   'hag66@shakespeare.example' in the channel coven might have a proxy JID of 'coven+123456@mix.shakespeare.example/789'.   There is no client visible mapping of proxy full JIDs maintained as this is not needed.   The MIX channel will need to maintain a mapping, to support directly addressing clients, such as for client to client disco#info queries.
     </p>
  </div>
  <div class="indent"><h3>3.6 <a name="concepts-nodes" id="concepts-nodes">Standard Nodes</a></h3>
    <p>The standard nodes are as follows (although note that not every channel will necessarily use each node):</p>
    <ul>
      <li>'urn:xmpp:mix:nodes:messages' for publishing messages. Each item of this node will contain a message sent to the channel.</li>
      <li>'urn:xmpp:mix:nodes:subject' for publishing the subject of the channel.</li>
      <li>'urn:xmpp:mix:nodes:participants' for publishing the list of participants (identified by anonymized bare proxy JID), and identifying the nick.  This is a list of users who would receive messages (by subscription to the messages node) and/or would receive presence (by subscription to the presence node).</li>

      <li>'urn:xmpp:mix:nodes:jidmap' for publishing a list of anonymized bare JIDs from the participants node with a 1:1 mapping to the corresponding real JIDs.</li>


      <li>'urn:xmpp:mix:nodes:presence' for publishing information about the availability status of online participants, which may include multiple clients for a single participant. </li>


      <li>'urn:xmpp:mix:nodes:config' for storing configuration information. </li>

      <li>'urn:xmpp:mix:nodes:acl' for storing information about access control lists (such as the list of owners and administrators). This information will generally be restricted to authorized users.</li>
    </ul>
    <p>
      jidmap is the only node that will always be present for a MIX channel and all other nodes are optional.   All channels will have either a message node, a presence node or both, because a channel will always share messages and/or presence.   MIX provides mechanisms to allow users to conveniently subscribe to a chosen set of nodes and to unsubscribe to all nodes with a single operation.
    </p>
    <p>
      The structure of each of the standard nodes is now considered in more detail
    </p>
    <div class="indent"><h3>3.6.1 <a name="messages-node" id="messages-node">Messages Node</a></h3>
      <p>Items in this node will contain a message identified by a unique ID.  A MIX implementation SHOULD NOT make messages available for retrieval from this node using pubsub.  The recommended approach is that zero history is held in the messages node, and that this node is used for publication only.   The recommended approach to retrieve message history is MAM. Users subscribe to this node to receive messages.</p>
      <p>Private Messages are not stored in the messages node.</p>
    </div>
    <div class="indent"><h3>3.6.2 <a name="subject-node" id="subject-node">Subject Node</a></h3>
      <p>The subject node publishes the current subject of channel. Subject history is stored in MAM. A single item is stored in this node at a time which MUST contain a "text" element and MAY contain additional text elements. Where multiple text elements are provided, each MUST posess an xml:lang attribute that describes the natural language of the subject. Users subscribe to this node to receive subject updates. The following example shows the format of a item in the subject node.</p>
      <p class="caption"><a name="example-1" id="example-1"></a>Example 1. Subject Node</p><div class="indent"><pre class="prettyprint">
&lt;items node='urn:xmpp:mix:nodes:subject'&gt;
  &lt;item&gt;
    &lt;text xml:lang="en"&gt;How to use Toads&lt;/text&gt;
    &lt;text xml:lang="de"&gt;Wie benutzt man Kröten&lt;/text&gt;
  &lt;/item&gt;
&lt;/items&gt;</pre></div>
    </div>
    <div class="indent"><h3>3.6.3 <a name="participants-node" id="participants-node">Participants Node</a></h3>
      <p>Each channel participant is represented as an item of the 'urn:xmpp:mix:nodes:participants' channel node. Each item is named by the bare proxy JID of the participant. For example 'coven+123456@mix.shakespeare.example' might name the node item associated with participant 'hag66@shakespeare.example'. The nick associated with the user is mandatory and is stored in the item.
      This node may be subscribed to for jid-visible channels that permit subscription to this node - this will allow users to see changes to channel membership.
      </p>
      <p class="caption"><a name="example-2" id="example-2"></a>Example 2. Value of Participants Node</p><div class="indent"><pre class="prettyprint">
&lt;items node='urn:xmpp:mix:nodes:participants'&gt;
  &lt;item id='coven+123456@mix.shakespeare.example/8765'&gt;
    &lt;participant xmlns='urn:xmpp:mix:0'
                 nick='thirdwitch'/&gt;
  &lt;/item&gt;
&lt;/items&gt;
</pre></div>
    </div>
    <div class="indent"><h3>3.6.4 <a name="jid-map-node" id="jid-map-node">JID Map Node</a></h3>

      <p>The JID Map node is used to associate a proxy bare JID to its corresponding real bare JID.
       Each item is identified by proxy bare JID, mapping to the real bare JID.  This node is used to give administrator access to real JIDs and participant access to real JIDs in jid-visible channels.
        In JID visible channels, all participants may subscribe to this node.  In JID hidden channels, only administrators can subscribe.  </p>
      <p class="caption"><a name="example-3" id="example-3"></a>Example 3. Value of JID Map Node</p><div class="indent"><pre class="prettyprint">
&lt;items node='urn:xmpp:mix:nodes:jidmap'&gt;
  &lt;item id='coven+123456@mix.shakespeare.example'&gt;
    &lt;participant xmlns='urn:xmpp:mix:0'
                 jid='hecate@mix.shakespeare.example'/&gt;
  &lt;/item&gt;
&lt;/items&gt;
</pre></div>
    </div>
    <div class="indent"><h3>3.6.5 <a name="presence-node" id="presence-node">Presence Node</a></h3>
      <p>
        The presence node contains the presence value for clients belonging to participants that choose to publish presence to the channel. A MIX channel MAY require that all participants publish presence.  Each item in the presence node is identified by the full proxy JID, and contains the current presence value for that JID.  The presence is encoded in the same way as data that would be sent in a presence stanza. The full JID is always used in this node. In MIX it is possible to have a 'presence-less channel' by not using this node. Access Control may be set to enforce that for each of the full JIDs in this list, the bare JID MUST be in the participants list.
      </p>
      <p>QUESTION:  The current specification allows channels to be configured so that node subscription is not restricted to participants (although this restriction is the default).  Is this flexibility desirable, or should we restrict to participants?</p>
      <p>
        This node may be subscribed to by users using bare JID.  So presence of online clients is sent to all users subscribed to this node, noting that presence is always sent using standard presence protocol.
      </p>
      <p class="caption"><a name="example-4" id="example-4"></a>Example 4. Value of Presence Node</p><div class="indent"><pre class="prettyprint">
&lt;items node='urn:xmpp:mix:nodes:presence'&gt;
  &lt;item id='coven+123456@mix.shakespeare.example/8765'&gt;
    &lt;presence xmlns='jabber:client'&gt;
      &lt;show&gt;dnd&lt;/show&gt;
      &lt;status&gt;Making a Brew&lt;/status&gt;
    &lt;/presence&gt;
  &lt;/item&gt;
&lt;/items&gt;
</pre></div>
    </div>
    <div class="indent"><h3>3.6.6 <a name="config-node" id="config-node">Configuration Node</a></h3>

      <p>The Configuration node holds the configuration of the channel as a single item, named by the date-time of the last update to the configuration.  A single item is stored in the node at a time, with previous configuration history accessed by MAM.  Users subscribed to the configuration node will enable notification of configuration change.  The configuration node is optional for a MIX channel.  For example, configuration choices could be fixed and not exposed.   A subset of the defined configuration options may be used and additional non-standard configuration options may be added.   If configuration options to control functionality of the nature described here are provided, the options defined in this standard MUST be used. The following configuration options are provided:</p>
      <ul>
        <li>'Date of Configuration Change'.  Encoded as the item ID.</li>
        <li>'Last Change Made By'.  Bare JID of the user making the last change.</li>
        <li>'Name'.  The name of the channel</li>
        <li> 'Members'.  List of JIDs with member rights.  The rights of members are configured in the ACL node.  </li>
        <li>'Outcast'.  List of JIDs banned from subscribing to any nodes in the MIX channel.  </li>
      </ul>
      <p>TEMPORARY NOTE AND QUESTION:  This is currently work in progress.  Suggestions for other items to be included in configuration are welcome.</p>
      <p>The format of the Configuration node follows <span class="ref"><a href="http://xmpp.org/extensions/xep-0004.html">Data Forms (XEP-0004)</a></span>  [<a href="#nt-idp1626896">13</a>].  This allows configuration to be updated by MIX defined commands and that the results of update commands can be directly written to the PubSub node.   Updates to the Configuration may use these commands or direct writing to the PubSub node.</p>
      <p class="caption"><a name="example-5" id="example-5"></a>Example 5. Configuration Node</p><div class="indent"><pre class="prettyprint">
&lt;items node='urn:xmpp:mix:nodes:config'&gt;
  &lt;item id='2016-05-30T09:00:00'
        name='A Dark Cave'&gt;
    *** TBS ****
  &lt;/item&gt;
&lt;/items&gt;
</pre></div>
    </div>
    <div class="indent"><h3>3.6.7 <a name="acl-node" id="acl-node">ACL Node</a></h3>
      <p>The ACL node is closely related to the configuration node, and contains more information that will generally be more restricted as to who can access and modify.   An anticipated configuration reflected in the defaults has ACL node configured so that it can be modified by channel owners and read only by channel owners and administrators.  The default for the configuration node is update by owners or administrators and visibility to list members.  Split of functionality has been made on the basis of this model. </p>
      <p>TEMPORARY NOTE AND QUESTION:  The split of configuration/acl is arbitrary.  It would be possible to merge them, or to split into more nodes, giving finer control granularity.  Input is solicited on the split an detailed assignment of items to nodes.</p>


      <p>The ACL node holds access control related configuration of the channel as a single item, named by the date-time of the last update to the ACL.  History MUST be set to 1.  Previous ACL history is accessed by MAM.  Users may subscribe to the ACL node if allowed using bare JID.  The ACL node is optional for a MIX channel.  For example, ACL choices could be fixed and not exposed.   A subset of the defined ACL options may be used and additional non-standard ACL options may be added.   If configuration options to control functionality of the nature described here are provided, the options defined in this standard MUST be used. The following ACL options are provided:</p>
      <ul>
        <li>'Date of Configuration Change'.  Encoded as the item ID.</li>
        <li>'Last Change Made By'.  Bare JID of the user making the last change.</li>
        <li>'Owners'.  List of bare JIDs with Owner rights as defined in ACL node.  When a list is created, the JID creating the list is configured as an owner, unless this attribute is explicitly configured to another value.  Owners will generally have full rights to make changes to channel configuration and access control.</li>
        <li>'Administrators'.  List of bare JIDs with Administrator rights.  An Administrator has rights to make changes to channel access control and configuration as defined in ACL node.  An Administrator also has operational right on a channel, such a kicking users out of the channel. These rights are analogous to moderator rights defined in <span class="ref">Multi-User Chat</span>.</li>

        <li>'End of Life'.  The date and time at which the channel will be automatically removed by the server.   If this is not set, the channel is permanent.</li>
        <li>'Nodes Present'.  Specifies which nodes are present: "participants"; "presence"; "subject"; "acl".  Note that "config" is implicit,  and "jidmap" is implied by "participants". </li>
        <li>'Message Node Subscription'.  Controls who can subscribe to messages node: "members-only"; "participants-only"; "anyone".  Users with banned affiliation may not subscribe.  Default "participants-only".</li>
        <li>'Participants Node Subscription'.  Controls who can subscribe to participants node: "members-only"; "participants-only"; "anyone"; "nobody".  Users with banned affiliation may not subscribe.  Default "participants-only".</li>
        <li>'Participants Node Subscription'.  Controls who can subscribe to participants node: "members-only"; "participants-only"; "anyone"; admins-and-owners" "nobody".  Users with banned affiliation may not subscribe.  Default "participants-only".   Note that this value needs to be restricted to "admins-and-owners" for channels with JID visibility set to a value other than "jid-mandatory-visible".</li>
        <li>'Presence Node Subscription'.  Controls who can subscribe to presence node: "members-only"; "participants-only"; "anyone"; "nobody".  Users with banned affiliation may not subscribe.  Default "participants-only".</li>
        <li>'Subject Node Subscription'.  Controls who can subscribe to subject node: "members-only"; "participants-only"; "anyone"; "nobody".  Users with banned affiliation may not subscribe.  Default "participants-only".</li>
        <li>'Configuration Node Access'.  Controls who can subscribe to and has read access configuration node: "members-only"; "participants-only"; "admins-and-owners"; "owners-only"; "anyone"; "nobody". Default "admins-and-owners".</li>
        <li>'ACL Node Access'.  Controls who can subscribe to and has read access acl node: "members-only"; "admins-and-owners"; "owners-only"; "anyone"; "nobody". Default "admins-and-owners".</li>
        <li>'Configuration Node Update'.  Controls who can modify configuration node: "owners-only"; "admins-and-owners". Default "admins-and-owners".</li>
        <li>'ACL Node Update'.  Controls who can modify acl node: "owners-only"; "admins-and-owners". Default "owners-only".</li>

        <li>'JID Visibility'. Choice of "jid-hidden", "jid-optionally-visible", "jid-mandatory-visible". </li>
        <li>'Open Presence'.  If selected, any client may register presence.  If not selected, only clients with bare JID in the participants list may register presence.</li>
        <li>'Allow Message Retraction'.  If this option is selected users will be able to retract messages sent to the MIX channel.</li>
        <li>'Membership Extension by Invitation'.  This option extends a members only channel so that an invitation from a channel member will add the invited user to the members list.
        </li>
        <li>'No Private Messages'.  If this option is selected, private messages may not be used with the channel.</li>

      </ul>
      <p>TEMPORARY NOTE:  This is currently work in progress.  Suggestions for other items to be included in ACL are welcome.</p>
      <p>The format of the ACL node follows <span class="ref"><a href="http://xmpp.org/extensions/xep-0004.html">Data Forms (XEP-0004)</a></span>  [<a href="#nt-idp1646368">14</a>]. </p>
      <p class="caption"><a name="example-6" id="example-6"></a>Example 6. ACL Node</p><div class="indent"><pre class="prettyprint">
&lt;items node='urn:xmpp:mix:nodes:acl'&gt;
  &lt;item id='2016-05-30T09:00:00'&gt;
    *** TBS ****
  &lt;/item&gt;
&lt;/items&gt;
</pre></div>



    </div>

  </div>
<h2>4.
       <a name="discovery" id="discovery">Discovery</a></h2>
  <div class="indent"><h3>4.1 <a name="disco-service" id="disco-service">Discovering a MIX service</a></h3>
    <p>To determine if a domain hosts a MIX service, a <span class="ref"><a href="http://xmpp.org/extensions/xep-0030.html">Service Discovery (XEP-0030)</a></span>  [<a href="#nt-idp1651568">15</a>] info query should be sent in the usual manner</p>
      <p class="caption"><a name="example-7" id="example-7"></a>Example 7. Entity queries a service</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.example/intibo24'
    id='lx09df27'
    to='mix.shakespeare.example'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
</pre></div>
    <p>The MIX service then MUST return its identity and the features it supports, which MUST include the 'urn:xmpp:mix:0' feature, and the identity MUST have a category of 'conference' and a type of 'text'. </p>
    <p>
      QUESTION: Is there a need for a different type than text?    Provisional answer: no.
    </p>
    <p class="caption"><a name="example-8" id="example-8"></a>Example 8. Service responds with Disco Info result</p><div class="indent"><pre class="prettyprint">
&lt;iq from='mix.shakespeare.example'
    id='lx09df27'
    to='hag66@shakespeare.example/intibo24'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;identity
        category='conference'
        name='Shakespearean Chat Service'
        type='text'/&gt;
    &lt;feature var='urn:xmpp:mix:0'/&gt;
    &lt;x xmlns='jabber:x:data' type='result'&gt;
      &lt;field var='FORM_TYPE' type='hidden'&gt;
        &lt;value&gt;urn:xmpp:mix:0#serviceinfo&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='muc-mirror'
             type='jid-single'
             label='Location of MUC mirror service'&gt;
        &lt;value&gt;chat.shakespeare.example&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
    <p>The result is returned in an extended disco results in a form whose type value is 'urn:xmpp:mix:0#serviceinfo'.
      If the MIX service is mirrored to a MUC service for backwards-compatibility, this SHOULD be signaled by the inclusion of field with var='muc-mirror', the value of which is the mirrored MUC domain's JID.  Where a MIX server supports MIX channels as <span class="ref"><a href="http://xmpp.org/extensions/xep-0045.html">Multi-User Chat (XEP-0045)</a></span>  [<a href="#nt-idp1657888">16</a>] rooms, the domain used for MUC may be different to the MIX domain or it MAY be the same.</p>
    <p>Note that the MIX service doesn't advertise support for <span class="ref"><a href="http://xmpp.org/extensions/xep-0313.html">Message Archive Management (XEP-0313)</a></span>  [<a href="#nt-idp1660576">17</a>], nor is support for generic <span class="ref"><a href="http://xmpp.org/extensions/xep-0060.html">Publish-Subscribe (XEP-0060)</a></span>  [<a href="#nt-idp1662768">18</a>] advertised.</p>
  </div>
  <div class="indent"><h3>4.2 <a name="disco-channel-list" id="disco-channel-list">Discovering the Channels on a Service</a></h3>
    <p>The list of channels supported by a MIX service is obtained by a disco command.</p>
    <p>AUTHOR'S NOTE:  This version contains a number of AUTHOR NOTES, which are reminder instructions to the author as to editing actions to be taken, and also indicate where changes are anticipated in future versions.</p>
    <p>
      AUTHOR'S NOTE:  Need to add  example.   This standard disco approach is going to replace the earlier proposed "urn:xmpp:mix:nodes:channels", unless there are objections.   
    </p>
  </div>
  <div class="indent"><h3>4.3 <a name="disco-channel-info" id="disco-channel-info">Discovering Channel Information</a></h3>
    <p>In order to find out more information about a given channel, a user can send a disco#info query to the channel.</p>
    <p class="caption"><a name="example-9" id="example-9"></a>Example 9. Entity Queries for Information about a Specific Channel</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.lit/pda'
    id='ik3vs715'
    to='coven@mix.shakespeare.lit'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
</pre></div>
    <p>The channel MUST return its identity and the features it supports:</p>
    <p class="caption"><a name="example-10" id="example-10"></a>Example 10. Channel Returns Disco Info Result</p><div class="indent"><pre class="prettyprint">
&lt;iq from='coven@mix.shakespeare.lit'
    id='ik3vs715'
    to='hag66@shakespeare.lit/pda'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;identity
        category='conference'
        name='A Dark Cave'
        type='mix'/&gt;
    &lt;feature var='urn:xmpp:mix:0'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
  </div>
  <div class="indent"><h3>4.4 <a name="disco-channel-nodes" id="disco-channel-nodes">Discovering Nodes at a Channel</a></h3>
    <p>Use disco#items to find the nodes associated with a channel.   The MIX server MUST only return nodes that exist and that the user making the query has rights to subscribe to.</p>
    <p class="caption"><a name="example-11" id="example-11"></a>Example 11. Entity Queries for Nodes at a Channel</p><div class="indent"><pre class="prettyprint">
&lt;iq from='hag66@shakespeare.lit/pda'
    id='kl2fax27'
    to='coven@mix.shakespeare.lit'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#items'/&gt;
&lt;/iq&gt;
</pre></div>
    <p class="caption"><a name="example-12" id="example-12"></a>Example 12. Room Returns Disco Items Result</p><div class="indent"><pre class="prettyprint">
&lt;iq from='coven@mix.shakespeare.lit'
    id='kl2fax27'
    to='hag66@shakespeare.lit/pda'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#items'&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:presence'/&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:subject'/&gt;
    &lt;item jid='coven@mix.shakespeare.example'
          node='urn:xmpp:mix:nodes:config'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
</pre></div>
  </div>
  <div class="indent"><h3>4.5 <a name="disco-channel-participants" id="disco-channel-participants">Discovering Participants in a Channel</a></h3>
    <p>
      Online clients in the channel are determined from the presence node.   Participants in the channel are determined from the "urn:xmpp:mix:nodes:participants" node which will give proxy JID and nick. The jidmap node is used to map to real JIDs.  </p>
    <p>AUTHOR'S NOTE:  Add example</p>
  </div>
<h2>5.
       <a name="usecases" id="usecases">Use Cases</a></h2>
  <div class="indent"><h3>5.1 <a name="usecases-user" id="usecases-user">Common User Use Cases</a></h3>
    <div class="indent"><h3>5.1.1 <a name="usecase-user-join" id="usecase-user-join">Joining a Channel</a></h3>
      <p>A user joins a channel by sending a MIX "join" command. There is no default set of nodes, so user MUST specify the set of nodes to be subscribed to. To achieve the equivalent service to MUC, a user would subscribe to messages, presence and subject.
         This will lead to the server subscribing the user to each of the requested nodes associated with the channel. The MIX server will also add the user to the participant list by injecting a new item into the "urn:xmpp:mix:nodes:participants" node automatically.

      </p>
      <p>The default MIX model is that only channel participants may subscribe to nodes.    A MIX channel MAY allow non-participant subscription.   This will be handled by clients directly subscribing to the desired PubSub nodes.</p>
        <p class="caption"><a name="example-13" id="example-13"></a>Example 13. User Joins a Channel</p><div class="indent"><pre class="prettyprint">
&lt;iq type='set'
    from='hag66@shakespeare.example/pda'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:0'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:presence'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:subject'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:config'/&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></div>
      <p>The channel must process the join atomically. The channel responds with an IQ-result. This stanza includes the nodes to which the user has been successfully subscribed, as well as the bare JID that will be used for the user in this channel and added to the participant list.  If a user cannot be subscribed to one or more of the requested nodes (e.g., because the node does not exist), but can be subscribed to some the response simply lists the nodes successfully subscribed.    If none of the nodes requested are successfully subscribed to, and error response is sent indicating the reason that the first node requested was not subscribed to.   This response will also include other nodes requested where subscription failed for the same reason.  A user may subsequently request subscription to nodes in a channel to which the user was not initially subscribed.  </p>
      <p class="caption"><a name="example-14" id="example-14"></a>Example 14. Channel Successfully Processes Join</p><div class="indent"><pre class="prettyprint">
&lt;iq type='result'
    from='coven@mix.shakespeare.example'
    to='hag66@shakespeare.example/pda'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:0' jid='hag66@shakespeare.example'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:presence'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:subject'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:config'/&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></div>
      <p>As noted, the participant might not be subscribed to all nodes associated with the channel (in this case only messages, participants, and subject).</p>
      <p class="caption"><a name="example-15" id="example-15"></a>Example 15. Channel Processes Join With Modifications</p><div class="indent"><pre class="prettyprint">
&lt;iq type='result'
    from='hag66@shakespeare.example/pda'
    to='coven@mix.shakespeare.example'
    id='E6E10350-76CF-40C6-B91B-1EA08C332FC7'&gt;
  &lt;join xmlns='urn:xmpp:mix:0' jid='hag66@shakespeare.example'&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:messages'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:participants'/&gt;
    &lt;subscribe node='urn:xmpp:mix:nodes:subject'/&gt;
  &lt;/join&gt;
&lt;/iq&gt;
</pre></div>
      <p>The channel also adds the user to the participants node and sends a notification.</p>
      <p class="caption"><a name="example-16" id="example-16"></a>Example 16. Channel Adds User to Participants Node</p><div class="indent"><pre class="prettyprint">
&lt;message from='coven@mix.shakespeare.example'
         to='hecate@shakespeare.example'
         id='5A9C7398-DB13-4BFA-A091-2D466C710AAF'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items node='urn:xmpp:mix:nodes:participants'&gt;
      &lt;item id='coven+123456@mix.shakespeare.example'&gt;
        &lt;participant xmlns='urn:xmpp:mix:0'
                     nick='thirdwitch'/&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
&lt;/message&gt;
</pre></div>
      <p>The user that has been added to the channel is identified by the item id of the item added to the pubsub node, which is the proxy JID of the new channel participant. Each &lt;participant&gt; element will include the nick of the user being added, which will be how the user will typically be shown in the channel.</p>
      <p>
        Following the MIX server side processing, the user's server will usually add the MIX channel to the user's roster using one way presence.   This means that the MIX channel will get presence information from the user.  This roster entry will lead to correct handling of the user's presence in the MIX channel.   If the user does not wish to publish presence and the channel permits this, then this roster addition does not happen.  If the channel requires presence and the user removes the channel from the user's roster, the channel MAY remove the user as a channel participant.
      </p>
    </div>

   <div class="indent"><h3>5.1.2 <a name="usecase-visibilty-pref" id="usecase-visibilty-pref">User Preferences and Additional Information</a></h3>
     <p>A channel may store additional user preferences and parameters.  Where the channel requires a value to be explicitly a <span class="ref"><a href="http://xmpp.org/extensions/xep-0004.html">Data Forms (XEP-0004)</a></span>  [<a href="#nt-idp1690464">19</a>] form will be returned in response to the join request with mandatory and optional fields.  If parameters are optional, the user may request to set them. </p>     }Xao6\
_ vE,iѠ]S$}%"I1;R8bw{wq}ŋnd}4)UA3yiwU_FJ]/VޱUħjr|.&_RY90^=yտ	!TǗmc]Ǖ~|T}\:oZۥ	6qtX\ɅtN\jWv&l CX$0pY|3!.TMCXjEWoܪq6+Bc,
tmߕ49@BS Zl5VLcycyR>ƕ9	VKMEVJ>aVJ`mc7s>RtetY)$.:(ieb]Ɇ Q~ѷd4&3/7+	J׶m&ofZ7gXN^c#Hq`Ɣd(K[x-r82؅TbkG~7H!*סs"Λb<{qG](V4koZ{;	2*Gkƺ{^rV'6HW
i-`ch'+H3ʺ7gbaA].7g1|=XܳMt}w73+Kz+xJ6*Da wZB':LSH̗CCDq>h	+GΓ8d}|Fs0˱a0u%dlI$H+ O*ɑǄdߠ TyO(=Aƈ5mJJBK9#%g`ـ}|	ǡ {hCS"-9eJpwi#)SnGs]*8"s>/jvlK YmC=?;QCϪЛP0SWrJYN]yYߨSCyQrԉ8yl	T@?!SA^6 ԠW6xx"j@q%H3Y"čkhnEV t*"	5&J
&LdoI{fqG}P-$W4R8Ծ<:j\84_+;f8 "˃ +ADAih o4s4Ett߄Zץ~Drˎ܍hG%@O0Q1\N3\B~dฑ
Cu£'4sb?L;W]fMYzZcgDt
Uqw_z{2Dv:A.h_C.Xr==͞ں~,LGhze~Wn׺@̲]kX
$PmGj@pl*жteG/770?_@
T]q4i贯5֫/FPal՘+H,oyޠyza	LvgMqEeC+rK%-pagI,S*aq}N+RzV6
<P=
N o'>z4"f'*\h7#LKRJB/0fdkI/40D'dTxXƬF;HN I^ thR70*nʠR
$[rw>*cZW1ħ7l(5Jqm%^'7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           WQZ;
#֠Lt'crq1<Ȭ׉kalcVVꦖ-y31ye:^?C$!z49e2Oc9
CX >[礄\ow݃Vњ
sL\rÞ0R8-ȀVGNx+ !'2&DwٵӧOL( @
#c/
dubɑs>__dA]^tɥ04SI@
hMj-WN0U;8 6AsS6k铃	!KZqs޶O|H^JUIBY^``z7$(lƦR>reİ~kĠaC;i@ߟS7QqHsf74@MNǸRA2c':jeJ>OeHF,c\/rxo
V:6GwַYqYuC
sE	4JI!bw/Fݨ]L{MRx8 &Y2".n)$#0CgܨޥzWm'瞰RB0D(Ġ_jL;v͓s0{ּD5iDU4691aw4bρ:rJpx0C%
PX2zCQA3=õGl6˱yd|JZ0n,8Y+jfwц~Bbz>^5Lט*J9ow&ueug6H!='Q	Bԕ](y=޾\%g9Ac= QtMJz^+Q|
OSıPʸΗcD9YRL#Mc+:`ћlZדş>{e_$KbmTꙫ@fx+9	\i8XuR5U`eROukW	&j5
[=؃xyVQaa&9PUNtklqd54TPJb7cQ,Jvi}sbxfbζ_O\4}- h9cG>6hx$2qr|`2g+`RC[Je<^y^!w*/jCEU2hĤ8rkWk	jZ`hmaYN*a8Vcr!{~_PRdObûlhFW`9E|E^'nk\*~~?lEvpI ݊A7?[4M`!/`tr!7j~ش'17:q{>9'c")JIqh[PI( R{*lF>xv"ɝ,#}WQZŎJ
0"k]UΙm,iiOߏ*+цHzS59a,R&oB?Pj'}AEץD:`Sji[ւzgkXf]U7ChKsOg7]1G-[gD_%uOtpAAk/N-K~B?y짭Vn;| "Igճycݓ.T	0|)H,fPp{qyGOttѨ^DBaB}xJJL6}-M)ƙc:R3Je"Z!(	PWZPIQgq}f%#mz<-ZU~`[VYsS \#v n`	N'S>#䅔_IxT0/+L棼uŔeR~8-zQa*8>'9F\>ߥ.2HZƅByeW:uF	}rs˳YctkUpY0BVnp˷ubOYQ0R, A}ya-N^w@9̓M0m2Z䎷C<d8[OJ|Pmoi
-
>oz7ۆ.SԆKi!}dJwM8H4y2/' :'u2S{]}ȐW4#	#l@V!sCjeM;Za?ez7tBݥEz6v
k7fSf~ÇhO>H޻[Ξ[g85
*.rx|658gFt1^77S|*O7&(O~C ;8ڡ5RXrcМY4Lm>ڍurWȥxK7|nw_ȶo1ϯ}/:c!^WZk&';B{
+H6eMJ3fFES*[Y΄8L9ħt`T.iKݵvkuF{{z.f!נ~Cg 	(ZTyBk4eK]eЊu,R]B 01b-Zg,RsKti%iDJN3}яl=\ۚ-H2S,ׇM4XqRs]ZB4a1XR+?.EUڳ#.e3xFk%A`1" iѶFkbGᬒ	NlAuꘫvt:(+bfnB]|!VG|%3PuC~JѼOg"9ӛc ":)۰!$m )63G7O3G?] -)}*HF}g{o\MÅ:IƲ uSkim3*=1ͰI1E& q\yWEMpr\&Y ԶzDW06FWϯw(5y`>?|yPX9BT#|fnz߳WM@	ݎ%W7qMd/ioٿԲ(J^I_*2yJ
a%sw_ saq<o9Ph=8F*~2).H%B׏EV2YnvN~Wr0wlfL2:,!85:*BHWڰHђ@YvbK).8h%ёnCrrnci:}ph17HMϸQi#ۂJ'ulp/G݆xZ"CEe]v܍ݬ\*i.#lV?z;:Bꥊ"j@:	MA3ڨ~c+j4
O_5\ɰ?GY#}aAɾ53q9"WWQr]$I@#AptcS|U|ܪ8X-2&n|ҿh>A6prS
жgibvQ+Sڝm;fj18>+TEX~}E-zV|ZQ_^+hTP؁ڏqQ<p=ӏ݃vA?Zw4{;ξ7_Ѻ=tdbFYӴW/cnQ:Y,5޿oi	$dЃhVW<6\Sz7BIb
p-XAl"xE$w	xA:s~uCV_/Ux[b(NW Oа u3ugX4*Mc;i7/_ji5<6ev>W&E+~?t$tpy;y&ëzͷ^B{hyU_u_WawWEkC8p\NT?t	K[A0RXua,eVU#4j'dz566ѯ\bߔ5j9U{'ãBlS}E @}(uNt}`loɔnMBF&zqpc+^&j/VB.ޛ|.僷<4\f3"bǈcX&.eVqj!xqpPܥ	N3Jf֐F>?d=xm醣:k7,!	e2]^/zRi1fsM21tݟO'翲
8~ce}#%x (RJeÐ޵Ѕ_9Zt>r*.#?]u'O	}ӆ:EގH~)	ұlpcsM6a'#iI<<&<4hq\ĢRjֻ9x1]S\v:g?u/zGg$zutu𷃋F$#yg)3{plofUԇ't^K:yt,z|J	³*	0ٱV! _gTFQJ+ln{2Y}A?X\{SCѺվXA^H9/8qvo=-FVK_mvU}	<0
nP*eJlNRZ@Pk5Zc\"OWz^LC${$hS]YЉ[.R{c[SPGl7PC#14
u-K+M`I4{.kŖ4|9)|t$
&szsE3+ﱄ
F&sZ\0*Vxzd52~Ry9ɐ+(jnz+ov?W;DrUWk¨-ñ
Y+ʙM3^d#uy׸Z-?ص9Է⺛Sˋ˳}:`_@6's
|5&7Pam6(缆\Y;*hp=5.{QV}|>Ry_^w+X@
htA.R j,'J}[*stE,p?S؃p1B89J7a%N1\6X}.:c8׋#sf!vUXdR*Mkf3kgv\/ݡ!0L<TGLk2N^S	ВJ\>LrDL9!R%ȦWLLθ@F`?u7}#Ϳ&WY0?aA,Y: W	X9vw ~ThR3_1D(vJe 4P	4
i0@pg$o 5Fژ͢7${;-d4_|Ln`&v:4acw9jvwqˆEo%	T@z-B@:۪ǽ䮦>{.81[f՘:-
 WYք.庤yBR7ze6Ƞ,qHݗe^^PhT~R1aM4׊#T?BAP2n3J,*]tZ|$ +A(USG)v4]U60oJb:Yli=WǓǹN!YH"` 7k>EuSZYRcq-F0&_5#i$ʼ|EtLa
Z\|"ToO5	Bx"gv`<B<^]<z*\Un.(<JV~i$ȅUZ&UVLí?8^RWMq0< 2Vc\!	 |Lhըk4J2$PUICmQWOWI}'
#񍤙ȭ"ewx^l=cQ<Wc@Cu'!m=)S^܊~h3 }hFH϶$mN]>2Ba44}(3*CݮJG<{gOSc`+耱΢`a,PZ/c'a_n-rz~/e59\n-r#6|Oē/~ic*]TurL;maz6޴hLwە`ͻN[K08'SuKcx9pCʍ75ϖ6}`Ïg,F7!BqmG&s@jUӽW[beCN:+&"SFGY7ntѕ-*^$1l2/h2rL*Wm 1N؎X! +C#U-]__⿶^nG<'˴ܪvn~|~|g{i뢳tU~4p^%ZkV7-V_w~E$YUI
0a+Y;I'ʌC/}}[Ȳ~C
景72''kz2_:n ݇$%#c0CZv!-K,>AV 'g70aZe|0r? RA)Yj[oh1/#<΄oY%) 3N?"b$\O?mz.Գd=ƹT/AfFwmޟ캧mğ[VOC}ٓz,}xP4=fa^C(mZmW%Iv(BBb B`)Q<"ku#kvFggF4p~߻b)_t;fB UnVfN%1JwE>׷ƘD"c/27Y%3 eum!(0,FXgE9
s^AWxX.qKo&nܦ>7!Cr!Y0[lԄ3QOi"ãzv.Z$NdZ\_2Ibٖ@vi+Z$!C`XK1sGU1VzƔ	qaxʎʦm޹qhh6ŷqt)ŉ[/Ls ̠iF:wNJh6|jo^&Û,
G__i9ى_e?jxMj{=$mt^X?5'3Xƴ]߷P閛#8%iLr敃-2|ҕ1!pЯꆊ?J"-1O"+C4j׬Lfz\xr~vms";i
dD˙+J#i-&*|!J}Гae2qhCR;e1Ұ(g\6TY.>{6{)R׎r[:@lcv6Z1w\ J FXR%[Vgͻ0<s0:ݡ[=6J#P23	"
Zqk>&<ᇇ~e#ok9	ua9Gy$㨓Sj2 Lux>QjK9iAo'/J^˦洇QH¢Tgo="s:CӠzr[ pFEN'?kMy<<E	-Qc<(h3J=u,+Cqr4Ϝ^t> u> v> w> x> y> z> {> |> }> ~> > > > > > > > > > > > > > >                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             S0PV8DN#>$#lN	b;,%|_ˬS˚亂y"X~=9V+e*PvX옚cC5|
%g.zEsSTH@%Ru:+|k0_eGa҆)AX+,O!݉LC &_aIԪϐ(!z@#\Lq6m+۳!t<N7
Zj^|sҹ^A'%ZbK*)9%dz7܏|Esʮ4kQtT&|Cyv&AZ=OKE
]9*|6JPnu5ñ`Qݔɕ;@_4R	,ՐȖc
乐Np12,bFtʥs<F{vuy~[=/<@襐022lE{~{#+?'͟m<:9qdeVtt)N
9XXL$!M-Oوi=sk3I0خ>ZAZMsb7Y #NʉyQj##{@=Cܘ55qBxF,sG''UǓB!d RU4ֽή|q؇i&C(@ \le)(zArPuDe&V%Wp%&XHIt">6XB,?ƽYJ4^|8uaJ7}|uw%(\;%& '9K6,=F(].6Bvy}MNq*{XIwڲjz'+ב\6ZÔ8 Rvv
S6yZ+aL,VEFY+$tq˰VLZwj0T{8Ivk5pt/(^;v
Q_lDU\(ۗ<qpY.(C0I N]c;:ae伃W݇M[@ԃHޒ6	Ҭ=	`
ithy21KNbZ	TH
ŷP56<b<yJOJgYIH$ljVuӮnpV&*<k,AƺK)$N r^jYzuy"#Ve'eTsoT}$T<B	˗xj< (wi81+Гb+(@)j?R^4)GH s"m#N8ڦ2os}zP(vB͓kфM"ZS	GB@g${>n}l%uwF!{ K9ϓuQ+-ڈkI0*j斒fmpxdMkxll(*ֻҰvO 5R?Xs {dѶl
$zTc~CⷐS*[+=d֜gk.lg0>Г@F7/~2twReBOu|h_	_(R%ѬM0w2TY˻l[؄[}-xh*\ĶNJT_
CIx	/Ykmy`S`IYVS!k&8<rQ.P~'7cr_MMcLc)nf	kĲ21L&6AYK܎h7Z_x2ǄV_j?KV,NtkQJs捶{vӼ!D]ﶜF>6XەL>~YൻCmSGE<ˢ-{l)~}.	??3z9;_\}{gv4Ol*X(fV|k{&3T-47q΀6DԢ0.VDK^ R?lb1UY<8%M_a3rKJ2dgAx	Ь[lڊƋf>-AJ m	SȤ[PNKVT;	[*|Y5/xn`Xe*ص;N٬p6^7`lV0lZ#TwFMA신ܴWY6-<4;ḧe8ZeL@fy
,m-A~@MUFH?Uf\:\6IS0Z
6܀,-|,jzНu[Yrc21Eh;J.Z'B+w5#(8($#Ox/ 9n/CcVӃQH[&{6@Cwwn	|^@4aUdsA-I1>DNh4(bT3
78m%߁mj*IҢ́Bq}T9,a-aX
Eۏ85Gū^JClme<NgpK!E`(Cb1+["'Vb`bmZhQÓa_Kfvz5A!oUϷxS]Du4"nhgYLcF[5b	G^I6h0MiY9JqD;vQ&[ݪҶ@i'elv+=1ML+y=/$򠝤'|$C[A TQRqLOVu]LErܒr&Zs)
j.lH@[Wξgb
(sӓmL Qn
m~	cG{0)孟irŭٕ(B÷DޒD-lI&aq6pF&v=ݵ{~Հr(g!ԏ5%5ry0RvZbHNf0|/>\)0d9ym#!%с봲j|{DQ+<i>}~;Swݫ+qC&41z9uHKj%+swhX"KgsKG3n2\t7#7s6)aWA$"͛ 7#H4ppg̀<+._OFbPՆ	С+X	R&A#9]bD#HauJ@!%dpogEaxi&ȘQh'`@FzmB4塗<R*<EF/d,;$ɕ-FĄ#=SHz:$/Es&'Ro )w.#Rqx0$]DЊz(9,Ms6R;"E{qxI0\̐ejDZ-i~.jCPdި"#|<t܆m&t,h(AƅZ(X]bA*<v *GNFzr:Dp!ؿ9O&I8ܽ193tg笖2b5H:vb \GON;z)(NV;glN0jsռJɅԣƃiSM9j=fQ^GL۹[7;l`IVܥ;'o_ٗi{ܫ΢
D1.
FtC39/Agh(R	MwθJՔ,WC'SPkrAXoOn6ụL*%ff],y.9#Mܭ"˲ mjoq>!\)HQ><Ek
auǊؾ/D䜅@j)Z1nt&L0PFFɩhb;I>fS\̯Y
e+m/W떹?T	>D~N(ClE9arhst%a5+P`3(}wK{ve1{ t}ѹ
G?%"P.=<UbacF¹-%C{#v>)flbtQʁD=я˩~jJ,:l-
TX,7ub,OUwwu͡Wt}ni]=P2xǬ<c\ȋӰUK~sR*Br;+W\1brMQ/Bw(}\VUCǖY>^jO
q-
^{N97)!"XDߝ	gFĐ㜃HJ]4~qG`>:cKx:jן=3Fi^ f<{%9<&;s;Y/;&xQ4j_^1Jvn8zHkbTV)Hx0U(Lb3b2n;a$l*NqTXakk/2Ų! ~^D}N4R a<B ZZRB%
@I>QDf4vgbK u<]ȳ)rQ*HG*:X
˔
A2s#J u&YEVeAu[դ0,	顴NkڂUlf0ՆL.Hh##lKᣟ%>!hv/BQJ5yNW`	+-O12͚vYF^!6WkaS+Xz^>PD1InS@-V|%B'RiZ 60dմ;}/U(:WxJ>z\MR52dCPa$hvhCaYBPtX'BkC/M-R)I67XorPB Kua߁QfQ/&=gWT=iy9_`mhBjMԷ1.(g2GC1Vݹ!-X;F蜳|OhVXi$w>Rw#o]< bTBcNnQBK/L:,(d24W%DjE.Rv{<< oPg&$6쉽ǸՌ ̰?r)#G$w#1whV!6xG+Yg5Q;i:OQrlRCQ5s-ȇVGi`Ǆǌ,	kժǊw7K}M=ùϺ/'7E6jk<
fJbd{oG	0+dBx4i+|(#ЛĐ˥]x/aȆ0u	"	-{}4`P∆JpeעPt"zNwΞ3B:X)8bm! !es3r1ʹq[DM~Hca
 zE(KCJa	yK㿹͆B=LVjURaLk"j.-.L/8"ZA9?([Zڥ:=L{D5y+$*yP1[ԏޕqqL'K%5CXm@Z)f`qY^bhTis'6e`V:\ d35?TW7*g(%P@p`۠Ożę3t?8TnxVhsNExˉ_'F.~GW>*67 fhacJz$/]3gIS+ctUk5|lQ<nFibzl>4?	L=OV	H&=
Fſ!4R9,H#`pcޭ@+#KiT6iڦ)O)Q/uǒClܼ͞+HUx3A>й2{DB!*9<O&-p!
ݰlK("%,qB0LnEoՒkVee"ZQD*cFqǬ2Pk>d>u<Et;CM%DªD m|k-s4@1VOb9
/+7"d,Fk%E<|ߢ^[w:^  ~#M{pBpYjz7EtPA6c"|J\(}e.NH6.#%#:oZ_Y`;̬i3:'rs:u`M>4㱕<mɃ 93:!@5OF2CRhtiQ EBhVBeaڦn Iu)''l4͙7ME(KD!+F*ETiCCT	xr
s5JCAߋjz-;{
N?eWjc.Fsv:e"bB wSXgnNwOn3Ojw21&+XrQ( JDm"8X"O6z[&\?u{WB;8$k׋PCMPO/&=H)[m62^6MA$#-K@$*)A
<q%Id
Х{NoPLٞ{"2y;Q>ZRdImYeBcBZ$
01NOB@S9.n̊%%³ըJW{zf%OroW*өO9*{IƸΖc&Qc)u
Dh/I5qE,"UR+**lH5ر:w2]>{y7ںĵe/I%bs8_Ma'r:TKr{9#ߦ.`HySԧ:0&ūAi"}:;v;8a:əl}`r3=qt|r}<9~ǁ Y=Cs0š`q烑C;KsEX<VJQѦ+4hsE11)5ZyKJ,)i/y($}ja=}Ŏq㗍g1ɱkQK&(za{g_CܐvJC|iO`o)WHBK t=KA^6#+M>Jɏ9|NoMDl273
I.G68?T4e{ivKkȖ4U[;(ҟdX.N
Jq=UQ;,D+}Eenphɹs8"(@(Vs"&V(//A<;ޓIL(\wP.~:coʯqFsVmuβ7Β}HL'{sz%ZV	 G6**ccח	UjUTF'\yNr2^Z&m&ۂ0E|eE9O:OĀ6.~xDiZ1"Q6zj61K1:XL=r~,j^']%2)M7<ZmibZiGjRrT?S*5S1<c=fXV@EG{~)m,Goi>ҥ)n"Rؓw&5g˄B@*_2!hX*m,wO
(kD]c=}ok,0RB"RXRBS7]&Uw)3_V_ݺT	v^CQ3ȥ  	Ѱ S% z
Gd!BTX8
 ǰ7k$&ӆ%$I|kݬLGC0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    