<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<title>JEP-0133: Service Administration</title>
<link rel="stylesheet" type="text/css" href="jep.css">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<meta name="DC.Title" content="Service Administration">
<meta name="DC.Creator" content="Peter Saint-Andre">
<meta name="DC.Description" content="This JEP defines recommended best practices for service-level administration of servers and components using Ad-Hoc Commands.">
<meta name="DC.Publisher" content="Jabber Software Foundation">
<meta name="DC.Contributor" content="JEP Editor">
<meta name="DC.Date" content="2004-09-30">
<meta name="DC.Type" content="Jabber Enhancement Proposal">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="JEP-0133">
<meta name="DC.Language" content="en">
<meta name="DC.Rights" content="This Jabber Enhancement Proposal is copyright 1999 - 2004 by the Jabber Software Foundation (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;http://www.jabber.org/jsf/ipr-policy.php&gt;. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at &lt;http://www.opencontent.org/openpub/&gt;).">
</head>
<body bgcolor="#FFFFFF">
<h1>JEP-0133: Service Administration</h1>
<p>This JEP defines recommended best practices for service-level administration of servers and components using Ad-Hoc Commands.</p>
<p><hr></p>
<p style="color:red">NOTICE: This JEP is currently within Last Call or under consideration by the Jabber Council for advancement to the next stage in the JSF standards process. For further details, visit &lt;<a href="http://www.jabber.org/council/queue.php">http://www.jabber.org/council/queue.php</a>&gt;.</p>
<p><hr></p>
<h2>JEP Information</h2>
<p class="indent">
            Status: Proposed<br>
            Type: Informational<br>
            Number: 0133<br>
            Version: 0.3<br>
            Last Updated: 2004-09-30<br>
            JIG: Standards JIG<br>
                Approving Body: Jabber Council<br>Dependencies: XMPP Core, JEP-0050<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: admin<br>
</p>
<h2>Author Information</h2>
<h3>Peter Saint-Andre</h3>
<p class="indent">
        Email: stpeter@jabber.org<br>
        JID: stpeter@jabber.org</p>
<h2>Legal Notice</h2>
<p class="indent">This Jabber Enhancement Proposal is copyright 1999 - 2004 by the <a href="http://www.jabber.org/jsf/">Jabber Software Foundation</a> (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;<a href="http://www.jabber.org/jsf/ipr-policy.php">http://www.jabber.org/jsf/ipr-policy.php</a>&gt;. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at &lt;<a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>&gt;).</p>
<h2>Discussion Venue</h2>
<p class="indent">The preferred venue for discussion of this document is the Standards-JIG discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards-jig">http://mail.jabber.org/mailman/listinfo/standards-jig</a>&gt;.</p>
<h2>Relation to XMPP</h2>
<p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core and XMPP IM specifications contributed by the Jabber Software Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocols defined in this JEP have been developed outside the Internet Standards Process and are to be understood as extensions to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
<h2>Conformance Terms</h2>
<p class="indent">The keywords &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted as described in RFC 2119.</p>
<p><hr></p>
<h2>Table of Contents</h2>
<dl>
<dt>1.  <a href="#intro">Introduction</a>
</dt>
<dt>2.  <a href="#reqs">Requirements</a>
</dt>
<dt>3.  <a href="#disco">Discovery</a>
</dt>
<dt>4.  <a href="#usecases">Use Cases</a>
</dt>
<dl>
<dt>4.1.  <a href="#add-user">Add a User</a>
</dt>
<dt>4.2.  <a href="#delete-user">Delete a User</a>
</dt>
<dt>4.3.  <a href="#disable-user">Disable a User</a>
</dt>
<dt>4.4.  <a href="#reenable-user">Re-Enable a User</a>
</dt>
<dt>4.5.  <a href="#end-user-session">End a User's Session</a>
</dt>
<dt>4.6.  <a href="#get-user-password">Get a User's Password</a>
</dt>
<dt>4.7.  <a href="#change-user-password">Change a User's Password</a>
</dt>
<dt>4.8.  <a href="#get-user-roster">Get a User's Roster</a>
</dt>
<dt>4.9.  <a href="#get-user-lastlogin">Get a User's Last Login Time</a>
</dt>
<dt>4.10.  <a href="#add-to-blacklist">Blacklist an Entity</a>
</dt>
<dt>4.11.  <a href="#whitelist">Whitelist an Entity</a>
</dt>
<dt>4.12.  <a href="#edit-blacklist">Edit the Blacklist</a>
</dt>
<dt>4.13.  <a href="#edit-whitelist">Edit the Whitelist</a>
</dt>
<dt>4.14.  <a href="#get-active-users">Get List of Active Users</a>
</dt>
<dt>4.15.  <a href="#get-all-users">Get List of All Users</a>
</dt>
<dt>4.16.  <a href="#announce">Send an Announcement to Active Users</a>
</dt>
<dt>4.17.  <a href="#set-motd">Set Message of the Day</a>
</dt>
<dt>4.18.  <a href="#delete-motd">Delete Message of the Day</a>
</dt>
<dt>4.19.  <a href="#set-welcome">Set Welcome Message</a>
</dt>
<dt>4.20.  <a href="#delete-welcome">Delete Welcome Message</a>
</dt>
<dt>4.21.  <a href="#grant-admin">Grant Administrative Privileges</a>
</dt>
<dt>4.22.  <a href="#revoke-admin">Revoke Administrative Privileges</a>
</dt>
<dt>4.23.  <a href="#edit-admin">Edit Admin List</a>
</dt>
<dt>4.24.  <a href="#restart">Restart Service</a>
</dt>
<dt>4.25.  <a href="#shutdown">Shut Down Service</a>
</dt>
</dl>
<dt>5.  <a href="#errors">Error Handling</a>
</dt>
<dt>6.  <a href="#security">Security Considerations</a>
</dt>
<dt>7.  <a href="#iana">IANA Considerations</a>
</dt>
<dt>8.  <a href="#registrar">Jabber Registrar Considerations</a>
</dt>
<dl>
<dt>8.1.  <a href="#registrar-protocol">Protocol Namespaces</a>
</dt>
<dt>8.2.  <a href="#registrar-formtype">Field Standardization</a>
</dt>
</dl>
<dt>9.  <a href="#sect-id2605726">XML Schema</a>
</dt>
<dt><a href="#notes">Notes</a></dt>
<dt><a href="#revs">Revision History</a></dt>
</dl>
<p><hr></p>
<h2>1.
       <a name="intro">Introduction</a>
</h2>
  <p class="" style="">There exists a set of common service-level tasks that administrators often need to perform in relation to Jabber/XMPP servers and components. Examples include creating users, disabling accounts, and blacklisting domains for inbound or outbound communications. Because such tasks can be performed with respect to a server or with respect to many kinds of add-on components (e.g., a text conferencing component that conforms to <span class="ref">Multi-User Chat</span>  [<a href="#nt-id2596176">1</a>]), it makes sense to define a generic protocol for such interactions. This JEP describes such a protocol by specifying a profile of <span class="ref">Ad-Hoc Commands</span>  [<a href="#nt-id2596199">2</a>], rather than by defining a specialized and distinct protocol.</p>
<h2>2.
       <a name="reqs">Requirements</a>
</h2>
  <p class="" style="">This JEP addresses the following requirements:</p>
  <ul>
    <li>Enable users with appropriate privileges to perform common administrative tasks with respect to Jabber/XMPP servers and components.</li>
    <li>Re-use existing XMPP and Jabber protocols wherever possible.</li>
  </ul>
<h2>3.
       <a name="disco">Discovery</a>
</h2>
  <p class="" style="">A server or component MUST advertise any administrative commands it supports via <span class="ref">Service Discovery</span>  [<a href="#nt-id2596150">3</a>] (as described in <span style="font-weight: bold">JEP-0050: Ad-Hoc Commands</span>); such commands exist as well-defined discovery nodes associated with the service in question.</p>
  <p class="" style="">In order to interact with a particular component attached to a server, an administrator needs to first discover that component and the commands it support, then send the appropriate command to the component itself. A server SHOULD NOT process commands on behalf of associated components, just as it does not handle service discovery requests on behalf of such components.</p>
<h2>4.
       <a name="usecases">Use Cases</a>
</h2>
  <p class="" style="">This JEP defines a profile of <span style="font-weight: bold">JEP-0050: Ad-Hoc Commands</span> that enables a service-level administrator to complete the following use cases:</p>
  <ol start="" type="">
    <li>Add a User</li>
    <li>Delete a User</li>
    <li>Disable a User</li>
    <li>Re-Enable a User</li>
    <li>End a User's Session</li>
    <li>Get a User's Password</li>
    <li>Change a User's Password</li>
    <li>Get a User's Roster</li>
    <li>Get a User's Last Login Time</li>
    <li>Blacklist an Entity</li>
    <li>Whitelist an Entity</li>
    <li>Edit the Blacklist</li>
    <li>Edit the Whitelist</li>
    <li>Get List of All Users</li>
    <li>Get List of Active Users</li>
    <li>Send an Announcement to Active Users</li>
    <li>Set Message of the Day</li>
    <li>Delete Message of the Day</li>
    <li>Set Welcome Message</li>
    <li>Delete Welcome Message</li>
    <li>Grant Administrative Privileges</li>
    <li>Revoke Administrative Privileges</li>
    <li>Edit Admin List</li>
    <li>Restart Service</li>
    <li>Shut Down Service</li>
  </ol>
  <p class="" style="">Naturally, not all of these use cases apply to all service types (e.g., adding a user may not apply to a multi-user chat service). An implementation or deployment MAY support any subset of the use cases defined herein. In addition, although this JEP aims to define common use cases, an implementation or deployment MAY support additional commands not defined herein.</p>
  <p class="" style=""><span style="font-style: italic">Note: The text that follows assumes that implementers have read and understood <span style="font-weight: bold">JEP-0050: Ad-Hoc Commands</span> as well as <span class="ref">Data Forms</span>  [<a href="#nt-id2601968">4</a>] (on which JEP-0050 depends).</span></p>
  <div class="indent">
<h3>4.1 <a name="add-user">Add a User</a>
</h3>
    <p class="" style="">A user is defined as any entity that has a persistent relationship with a service (most commonly through the creation a registered account with the service) and whose account is in some sense hosted by the service. Adding a user MUST result in the creation of an account, along with any implementation-specific data for such an account (e.g., database entries or a roster file). The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#add-user&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 1. Admin Requests to Add a User</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='add-user-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#add-user'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 2. Service Returns Add User Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='add-user-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-user'
           sessionid='add-user:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Adding a User&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to add a user.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID for this account'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
      &lt;field label='The password for this account'
             type='text-private'
             var='password'/&gt;
      &lt;field label='Retype password'
             type='text-private'
             var='password-verify'/&gt;
      &lt;field label='Email address'
             type='text-single'
             var='email'/&gt;
      &lt;field label='Given name'
             type='text-single'
             var='firstname'/&gt;
      &lt;field label='Family name'
             type='text-single'
             var='surname'/&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 3. Admin Submits Add User Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='add-user-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-user'
           sessionid='add-user:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='password'&gt;
        &lt;value&gt;R0m30&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='password-verify'&gt;
        &lt;value&gt;R0m30&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='email'&gt;
        &lt;value&gt;juliet@capulet.com&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='firstname'&gt;
        &lt;value&gt;Juliet&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='surname'&gt;
        &lt;value&gt;Capulet&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 4. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='add-user-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-user'
           sessionid='add-user:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Notification of completion MAY include the processed data in a data form of type &quot;result&quot;.</p>
  </div>
  <div class="indent">
<h3>4.2 <a name="delete-user">Delete a User</a>
</h3>
    <p class="" style="">An administrator may need to permanently delete a user account. Deleting a user SHOULD result in the termination of any active sessions for the user and in the destruction of any implementation-specific data for the account (e.g., database entries or a roster file). The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#delete-user&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 5. Admin Requests to Delete a User</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='delete-user-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#delete-user'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 6. Service Returns Delete User Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='delete-user-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#delete-user'
           sessionid='delete-user:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Deleting a User&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to delete a user.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID for this account'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 7. Admin Submits Delete User Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='delete-user-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#delete-user'
           sessionid='delete-user:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 8. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='delete-user-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#delete-user'
           sessionid='delete-user:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.3 <a name="disable-user">Disable a User</a>
</h3>
    <p class="" style="">An administrator may need to temporarily disable a user account. Disabling a user MUST result in the termination of any active sessions for the user and in the prevention of further user logins until the account is re-enabled (this can be thought of as &quot;banning&quot; the user). However, it MUST NOT result in the destruction of any implementation-specific data for the account (e.g., database entries or a roster file). The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#disable-user&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 9. Admin Requests to Disable a User</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='disable-user-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#disable-user'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 10. Service Returns Disable User Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='disable-user-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#disable-user'
           sessionid='disable-user:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Disabling a User&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to disable a user.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID for this account'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 11. Admin Submits Disable User Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='disable-user-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#disable-user'
           sessionid='disable-user:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 12. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='disable-user-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#disable-user'
           sessionid='disable-user:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.4 <a name="reenable-user">Re-Enable a User</a>
</h3>
    <p class="" style="">An administrator may need to re-enable a user account that had been temporarily disabled. Re-enabling a user MUST result in granting the user the ability to access the service again. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#reenable-user&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 13. Admin Requests to Re-Enable a User</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='reenable-user-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#reenable-user'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 14. Service Returns Re-Enable User Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='reenable-user-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#reenable-user'
           sessionid='reenable-user:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Re-Enable a User&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to re-enable a user.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID for this account'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 15. Admin Submits Re-Enable User Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='reenable-user-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#reenable-user'
           sessionid='reenable-user:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 16. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='reenable-user-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#reenable-user'
           sessionid='reenable-user:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.5 <a name="end-user-session">End a User's Session</a>
</h3>
    <p class="" style="">An administrator may need to terminate one or all of the user's current sessions, but allow future logins (this can be thought of as &quot;kicking&quot; rather than &quot;banning&quot; the user). The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#end-user-session&quot;.</p> 
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 17. Admin Requests to End a User's Session</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='end-user-session-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#end-user-session'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 18. Service Returns End User Session Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='end-user-session-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#end-user-session'
           sessionid='end-user-session:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Ending a User Session&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to end a user&amp;apos;s session.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID for this account'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the JID is of the form &lt;user@host&gt;, the service MUST end all of the user's sessions; if the JID is of the form &lt;user@host/resource&gt;, the service MUST end only the session associated with that resource.</p>
    <p class="caption">Example 19. Admin Submits End User Session Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='end-user-session-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#end-user-session'
           sessionid='end-user-session:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 20. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='end-user-session-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#end-user-session'
           sessionid='end-user-session:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.6 <a name="get-user-password">Get a User's Password</a>
</h3>
    <p class="" style="">An administrator may need to retrieve a user's password. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#get-user-password&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 21. Admin Requests to Get a User's Password</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='get-user-password-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#get-user-password'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 22. Service Returns Get User Password Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='get-user-password-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-password'
           sessionid='get-user-password:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Getting a User's Password&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to get a user&amp;apos;s password.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID for this account'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 23. Admin Submits Get User Password Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='get-user-password-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-password'
           sessionid='get-user-password:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Naturally, the data form included in the IQ result will include the user's password.</p>
    <p class="caption">Example 24. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='get-user-password-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-password'
           sessionid='get-user-password:20040408T0337Z'
           status='completed'&gt;
    &lt;x xmlns='jabber:x:data' type='result'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='password'&gt;
        &lt;value&gt;R0m30&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/completed&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.7 <a name="change-user-password">Change a User's Password</a>
</h3>
    <p class="" style="">An administrator may need to change a user's password. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#change-user-password&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 25. Admin Requests to Change a User's Password</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='change-user-password-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#change-user-password'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 26. Service Returns Change User Password Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='change-user-password-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#change-user-password'
           sessionid='change-user-password:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Changing a User Password&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to change a user&amp;apos;s password.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The password for this account'
             type='text-private'
             var='password'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 27. Admin Submits Change User Password Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='change-user-password-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#change-user-password'
           sessionid='change-user-password:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='password'&gt;
        &lt;value&gt;V3r0n4&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 28. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='change-user-password-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#change-user-password'
           sessionid='change-user-password:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.8 <a name="get-user-roster">Get a User's Roster</a>
</h3>
    <p class="" style="">An administrator may need to retrieve a user's roster (e.g., to help verify the user's ownership of the account before reminding the user of the password). The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#get-user-roster&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 29. Admin Requests to Get a User's Roster</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='get-user-roster-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#get-user-roster'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 30. Service Returns Get User Roster Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='get-user-roster-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-roster'
           sessionid='get-user-roster:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Getting a User's Roster&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to get a user&amp;apos;s roster.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID for this account'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 31. Admin Submits Get User Roster Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='get-user-roster-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-roster'
           sessionid='get-user-roster:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The data form included in the IQ result will include the user's roster, formatted according to the 'jabber:iq:roster' protocol defined in <span class="ref">XMPP IM</span>  [<a href="#nt-id2603233">5</a>].</p>
    <p class="caption">Example 32. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='get-user-roster-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-roster'
           sessionid='get-user-roster:20040408T0337Z'
           status='completed'&gt;
    &lt;x xmlns='jabber:x:data' type='result'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
      &lt;query xmlns='jabber:iq:roster'&gt;
        &lt;item jid='romeo@example.net'
              name='Romeo'
              subscription='both'&gt;
          &lt;group&gt;Friends&lt;/group&gt;
          &lt;group&gt;Lovers&lt;/group&gt;
        &lt;/item&gt;
        &lt;item jid='mercutio@example.org'
              name='Mercutio'
              subscription='from'&gt;
          &lt;group&gt;Friends&lt;/group&gt;
        &lt;/item&gt;
        &lt;item jid='benvolio@example.org'
              name='Benvolio'
              subscription='both'&gt;
          &lt;group&gt;Friends&lt;/group&gt;
        &lt;/item&gt;
      &lt;/query&gt;
    &lt;/x&gt;
  &lt;/completed&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.9 <a name="get-user-lastlogin">Get a User's Last Login Time</a>
</h3>
    <p class="" style="">An administrator may need to retrieve a user's last login time (e.g., to help verify the user's ownership of the account before reminding the user of the password). The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#get-user-lastlogin&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 33. Admin Requests to Get a User's Roster</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='get-user-lastlogin-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#get-user-lastlogin'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 34. Service Returns Get User Last Login Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='get-user-lastlogin-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-lastlogin'
           sessionid='get-user-lastlogin:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Getting a User's Last Login Time&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to get a user&amp;apos;s last login time.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID for this account'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 35. Admin Submits Get User Last Login Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='get-user-lastlogin-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-lastlogin'
           sessionid='get-user-lastlogin:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The data form included in the IQ result will include the user's last login time.</p>
    <p class="caption">Example 36. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='get-user-lastlogin-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-lastlogin'
           sessionid='get-user-lastlogin:20040408T0337Z'
           status='completed'&gt;
    &lt;x xmlns='jabber:x:data' type='result'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;juliet@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='lastlogin'&gt;
        &lt;value&gt;1234&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/completed&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.10 <a name="add-to-blacklist">Blacklist an Entity</a>
</h3>
    <p class="" style="">The service may enable an administrator to define one or more service-wide blacklists (lists of entities that are blocked from communications to or from the service). For example, a multi-user chat service may forbid a certain user from joining any room on the service, or may block entire domains from accessing the service. An entity added to a blacklist MAY be a JID of any form as specified in <span class="ref">XMPP Core</span>  [<a href="#nt-id2603470">6</a>]; the order of JID matching SHOULD be that specified for privacy lists in Section 10 of <span style="font-weight: bold">XMPP IM</span>. The act of blacklisting an entity adds it to the blacklist but does not otherwise change the blacklist.</p>
    <p class="" style="">A blacklist may prevent inbound communications, outbound communications, or both; whether to offer only bidirectional blocking or a more granular choice of inbound or outbound blocking is a matter of implementation or deployment policy. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#add-to-blacklist&quot; if blocking is bidirectional; &quot;http://jabber.org/protocol/admin#add-to-blacklist-in&quot; for inbound blocking only; and &quot;http://jabber.org/protocol/admin#add-to-blacklist-out&quot; for outbound blocking only.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 37. Admin Requests Blacklisting of an Entity</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='add-to-blacklist-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#add-to-blacklist'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 38. Service Returns Blacklist Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='add-to-blacklist-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-to-blacklist'
           sessionid='add-to-blacklist:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Blocking Communications With an Entity&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to block communications with an entity.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The entity to block'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 39. Admin Submits Blacklist Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='add-to-blacklist-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-to-blacklist'
           sessionid='add-to-blacklist:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;marlowe.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 40. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='add-to-blacklist-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-to-blacklist'
           sessionid='add-to-blacklist:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.11 <a name="whitelist">Whitelist an Entity</a>
</h3>
    <p class="" style="">The service may enable an administrator to define one or more service-wide whitelists (lists of entities that are allowed to communicate the service). For example, a publish-subscribe may allow only a select list of users to publish or subscribe to nodes hosted on the service. An entity added to a whitelist MAY be a JID of any form as specified in <span style="font-weight: bold">XMPP Core</span>; the order of JID matching SHOULD be that specified for privacy lists in Section 10 of <span style="font-weight: bold">XMPP IM</span>. The act of whitelisting an entity adds it to the whitelist but does not otherwise change the whitelist. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#add-to-whitelist&quot;.</p>
    <p class="" style="">As with blacklists, a whitelist may prevent inbound communications, outbound communications, or both; whether to offer only bidirectional blocking or a more granular choice of inbound or outbound blocking is a matter of implementation or deployment policy. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#add-to-whitelist&quot; if blocking is bidirectional; &quot;http://jabber.org/protocol/admin#add-to-whitelist-in&quot; for inbound blocking only; and &quot;http://jabber.org/protocol/admin#add-to-whitelist-out&quot; for outbound blocking only.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 41. Admin Requests Whitelisting of an Entity</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='add-to-whitelist-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#add-to-whitelist'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 42. Service Returns Whitelist Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='add-to-whitelist-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-to-whitelist'
           sessionid='add-to-whitelist:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Allowing Communications With an Entity&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to allow communications with an entity.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The entity to allow'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: If the entity is an end user, the JID SHOULD be of the form &lt;user@host&gt;, not &lt;user@host/resource&gt;.</p>
    <p class="caption">Example 43. Admin Submits Whitelist Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='add-to-whitelist-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-to-whitelist'
           sessionid='add-to-whitelist:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;england.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 44. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='add-to-whitelist-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#add-to-whitelist'
           sessionid='add-to-whitelist:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.12 <a name="edit-blacklist">Edit the Blacklist</a>
</h3>
    <p class="" style="">An administrator may need to edit the blacklist rather than simply add an entity to it. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#edit-blacklist&quot; if blocking is bidirectional; &quot;http://jabber.org/protocol/admin#edit-blacklist-in&quot; for inbound blocking only; and &quot;http://jabber.org/protocol/admin#edit-blacklist-out&quot; for outbound blocking only.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 45. Admin Requests Editing of Blacklist</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='edit-blacklist-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#edit-blacklist'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 46. Service Returns Edit Blacklist Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='edit-blacklist-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-blacklist'
           sessionid='edit-blacklist:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Editing the Blacklist&lt;/title&gt;
      &lt;instructions&gt;
          Fill out this form to edit the list of entities with whom
          communications are disallowed.
      &lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The blacklist'
             type='jid-multi'
             var='blacklist'&gt;
        &lt;value&gt;marlowe.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 47. Admin Submits Edit Blacklist Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='edit-blacklist-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-blacklist'
           sessionid='edit-blacklist:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='blacklist'&gt;
        &lt;value&gt;denmark.lit&lt;/value&gt;
        &lt;value&gt;france.lit&lt;/value&gt;
        &lt;value&gt;marlowe.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 48. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='edit-blacklist-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-blacklist'
           sessionid='edit-blacklist:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.13 <a name="edit-whitelist">Edit the Whitelist</a>
</h3>
    <p class="" style="">An administrator may need to edit the whitelist rather than simply add an entity to it. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#edit-whitelist&quot; if blocking is bidirectional; &quot;http://jabber.org/protocol/admin#edit-whitelist-in&quot; for inbound blocking only; and &quot;http://jabber.org/protocol/admin#edit-whitelist-out&quot; for outbound blocking only.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 49. Admin Requests Editing of Whitelist</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='edit-whitelist-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#edit-whitelist'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 50. Service Returns Edit Whitelist Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='edit-whitelist-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-whitelist'
           sessionid='edit-whitelist:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Editing the Whitelist&lt;/title&gt;
      &lt;instructions&gt;
          Fill out this form to edit the list of entities with whom
          communications are allowed.
      &lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The whitelist'
             type='jid-multi'
             var='whitelist'&gt;
        &lt;value&gt;capulet.com&lt;/value&gt;
        &lt;value&gt;denmark.lit&lt;/value&gt;
        &lt;value&gt;england.lit&lt;/value&gt;
        &lt;value&gt;montague.net&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 51. Admin Submits Edit Whitelist Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='edit-whitelist-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-whitelist'
           sessionid='edit-whitelist:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='whitelist'&gt;
        &lt;value&gt;capulet.com&lt;/value&gt;
        &lt;value&gt;england.lit&lt;/value&gt;
        &lt;value&gt;montague.net&lt;/value&gt;
        &lt;value&gt;verona.it&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 52. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='edit-whitelist-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-whitelist'
           sessionid='edit-whitelist:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.14 <a name="get-active-users">Get List of Active Users</a>
</h3>
    <p class="" style="">Administrators of some existing Jabber servers have found it useful to be able to retrieve a list of all online users of the server; this concept can be extended to any service (such as a multi-user chat service or a gateway to a foreign IM service). Obviously, the service may need to truncate the result-set, since it could be quite large; furthermore, any ability to limit or page through the result-set is outside the scope of this JEP. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#get-active-users&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 53. Admin Requests List of Active Users</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='get-active-users-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#get-active-users'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD simply return the list of active users.</p>
    <p class="caption">Example 54. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='get-active-users-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-active-users'
           sessionid='get-active-users:20040408T0337Z'
           status='completed'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The list of active users'
             type='jid-multi'
             var='userlist'&gt;
        &lt;value&gt;bill@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;crone1@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;hag66@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;hecate@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;wiccarocks@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.15 <a name="get-all-users">Get List of All Users</a>
</h3>
    <p class="" style="">The concept of retrieving a list of active users can be extended even further to enable an administrator to retrieve a list of all users (not just active or online users). As with the previous use case, the service may need to truncate the result-set, since it could be quite large; furthermore, any ability to limit or page through the result-set is outside the scope of this JEP. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#get-all-users&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 55. Admin Requests List of All Users</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='get-all-users-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#get-all-users'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the list of all users.</p>
    <p class="caption">Example 56. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='get-all-users-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-all-users'
           sessionid='get-all-users:20040408T0337Z'
           status='completed'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The list of all users'
             type='jid-multi'
             var='userlist'&gt;
        &lt;value&gt;bernardo@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;bill@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;cordelia@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;crone1@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;emilia@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;francisco@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;goneril@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;hag66@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;hecate@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;iago@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;kingclaudius@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;kinglear@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;laertes@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;macbeth@shakespeare.li&lt;/value&gt;
        &lt;value&gt;mercutio@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;nestor@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;northumberland@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;painter@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;regan@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;timon@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;wiccarocks@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.16 <a name="announce">Send an Announcement to Active Users</a>
</h3>
    <p class="" style="">Administrators of some existing Jabber servers have found it useful to be able to send an announcement to all online users of the server (e.g., to announce a server shutdown); this concept can be extended to any service (such as a multi-user chat service or a gateway to a foreign IM service). The message shall be sent only to users who currently have a &quot;session&quot; with the service. Obviously there may be latency in sending the message if the number of active users is extremely large. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#announce&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 57. Admin Requests Announcement</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='announce-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#announce'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 58. Service Returns Announce Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='announce-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#announce'
           sessionid='announce:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Making an Announcement&lt;/title&gt;
      &lt;instructions&gt;
          Fill out this form to make an announcement to all
          active users of this service.
      &lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Announcement'
             type='text-multi'
             var='announcement'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 59. Admin Submits Announce Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='announce-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#announce'
           sessionid='announce:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='announcement'&gt;
        &lt;value&gt;Attention! This service will be going down for&lt;/value&gt;
        &lt;value&gt;maintenance in 2 minutes. Please log off now!&lt;/value&gt;
        &lt;value&gt;We apologize for the inconvenience.&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 60. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='announce-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#announce'
           sessionid='announce:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.17 <a name="set-motd">Set Message of the Day</a>
</h3>
    <p class="" style="">Administrators of some existing Jabber servers have found it useful to be able to send a &quot;message of the day&quot; that is delivered to any user who logs in to the server that day (e.g., to announce service changes); this concept can be extended to any service (such as a multi-user chat service or a gateway to a foreign IM service). The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#set-motd&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 61. Admin Sets Message of the Day</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='set-motd-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#set-motd'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form, which SHOULD include the current message of the day if one has already been set.</p>
    <p class="caption">Example 62. Service Returns MOTD Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='set-motd-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#set-motd'
           sessionid='set-motd:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Setting the Message of the Day&lt;/title&gt;
      &lt;instructions&gt;
          Fill out this form to set the message of the day.
      &lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Message of the Day'
             type='text-multi'
             var='motd'&gt;
        &lt;required/&gt;
        &lt;value&gt;Don&amp;apos;t forget: the grand re-opening of the&lt;/value&gt;
        &lt;value&gt;Globe Theatre will occur tomorrow night.&lt;/value&gt;
        &lt;value&gt;The festivities will begin right after tea&lt;/value&gt;
        &lt;value&gt;and extend far into the night. Don&amp;apos;t miss it!&lt;/value&gt;
        &lt;value&gt;--The Globe Stuff&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 63. Admin Submits MOTD Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='set-motd-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#set-motd'
           sessionid='set-motd:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='motd'&gt;
        &lt;value&gt;Don&amp;apos;t forget: the grand re-opening of the&lt;/value&gt;
        &lt;value&gt;Globe Theatre will occur tomorrow night.&lt;/value&gt;
        &lt;value&gt;The festivities will begin right after tea&lt;/value&gt;
        &lt;value&gt;and extend far into the night. Don&amp;apos;t miss it!&lt;/value&gt;
        &lt;value&gt;--The Globe Staff&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 64. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='set-motd-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#set-motd'
           sessionid='set-motd:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.18 <a name="delete-motd">Delete Message of the Day</a>
</h3>
    <p class="" style="">Sometimes a previously-set &quot;message of the day&quot; is no longer appropriate and needs to be deleted. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#delete-motd&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 65. Admin Deletes Message of the Day</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='delete-motd-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#delete-motd'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD simply delete the message of the day.</p>
    <p class="caption">Example 66. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='delete-motd-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#delete-motd'
           sessionid='delete-motd:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.19 <a name="set-welcome">Set Welcome Message</a>
</h3>
    <p class="" style="">Some existing Jabber servers send an informative &quot;welcome message&quot; to newly registered users of the server when they first log in; this concept can be extended to any service (such as a multi-user chat service or a gateway to a foreign IM service). The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#set-welcome&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 67. Admin Sets Welcome Message</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='set-welcome-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#set-welcome'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form, which SHOULD include the current welcome message if one has already been set.</p>
    <p class="caption">Example 68. Service Returns Welcome Message Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='set-welcome-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#set-welcome'
           sessionid='set-welcome:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Setting Welcome Message&lt;/title&gt;
      &lt;instructions&gt;
          Fill out this form to set the welcome message
          for this service.
      &lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Welcome Message'
             type='text-multi'
             var='welcome'&gt;
        &lt;required/&gt;
        &lt;value&gt;Welcome to Shakespeare.lit, your home for&lt;/value&gt;
        &lt;value&gt;instant messaging with a literary touch.&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 69. Admin Submits Welcome Message Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='set-welcome-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#set-welcome'
           sessionid='set-welcome:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='welcome'&gt;
        &lt;value&gt;Welcome to Shakespeare.lit, your home for&lt;/value&gt;
        &lt;value&gt;instant messaging with a literary touch.&lt;/value&gt;
        &lt;value&gt;For helpful information about this service,&lt;/value&gt;
        &lt;value&gt;hie thee to http://www.shakespeare.lit/&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 70. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='set-welcome-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#set-welcome'
           sessionid='set-welcome:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.20 <a name="delete-welcome">Delete Welcome Message</a>
</h3>
    <p class="" style="">Sometimes a previously-set &quot;welcome message&quot; is no longer appropriate and needs to be deleted. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#delete-welcome&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 71. Admin Deletes Welcome Message</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='delete-welcome-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#delete-welcome'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD simply delete the welcome message.</p>
    <p class="caption">Example 72. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='delete-welcome-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#delete-welcome'
           sessionid='delete-welcome:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.21 <a name="grant-admin">Grant Administrative Privileges</a>
</h3>
    <p class="" style="">An administrator may want to grant administrative privileges to another user. Whether there are distinctions between service-level administrators (e.g., owner, admin, moderator), and thus which types of administrators are allowed to grant administrative privileges, is a matter for the implementation or local service policy and is not specified herein. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#grant-admin&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 73. Admin Requests to Grant Admin Privileges</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='grant-admin-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#grant-admin'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 74. Service Returns Grant Admin Privileges Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='grant-admin-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#grant-admin'
           sessionid='grant-admin:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Granting Administrative Privileges&lt;/title&gt;
      &lt;instructions&gt;
          Fill out this form to grant administrative privileges 
          to another user.
      &lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID of the new admin'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 75. Admin Submits Grant Admin Privileges Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='grant-admin-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#grant-admin'
           sessionid='grant-admin:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;hecate@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 76. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='grant-admin-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#grant-admin'
           sessionid='grant-admin:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.22 <a name="revoke-admin">Revoke Administrative Privileges</a>
</h3>
    <p class="" style="">An administrator may want to revoke another user's administrative privileges. Whether there are distinctions between service-level administrators (e.g., owner, admin, moderator), and thus in what types of administrators are allowed to revoke administrative privileges, is a matter for the implementation or local service policy and is not specified herein. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#revoke-admin&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 77. Admin Requests to Revoke Admin Privileges</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='revoke-admin-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#revoke-admin'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 78. Service Returns Revoke Admin Privileges Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='revoke-admin-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#revoke-admin'
           sessionid='revoke-admin:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Revoking Admin Privileges&lt;/title&gt;
      &lt;instructions&gt;
          Fill out this form to revoke another user&amp;apos; 
          administrative privileges.
      &lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The Jabber ID of the soon-to-be former admin'
             type='jid-single'
             var='jid'&gt;
        &lt;required/&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 79. Admin Submits Revoke Admin Privileges Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='revoke-admin-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#revoke-admin'
           sessionid='revoke-admin:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='jid'&gt;
        &lt;value&gt;hecate@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 80. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='revoke-admin-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#revoke-admin'
           sessionid='revoke-admin:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.23 <a name="edit-admin">Edit Admin List</a>
</h3>
    <p class="" style="">An administrator may want to directly edit the list of users who have administrative privileges. Whether there are distinctions between service-level administrators (e.g., owner, admin, moderator), and thus in what types of administrators are allowed to edit administrative privileges, is a matter for the implementation or local service policy and is not specified herein. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#edit-admin&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 81. Admin Requests Editing of Admin List</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='edit-admin-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#edit-admin'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 82. Service Returns Edit Admin List Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='edit-admin-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-admin'
           sessionid='edit-admin:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Editing the Admin List&lt;/title&gt;
      &lt;instructions&gt;
          Fill out this form to edit the list of entities who
          have administrative privileges.
      &lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='The admin list'
             type='jid-multi'
             var='adminlist'&gt;
        &lt;value&gt;bill@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;chris@marlowe.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 83. Admin Submits Edit Admin List Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='edit-admin-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-admin'
           sessionid='edit-admin:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='adminlist'&gt;
        &lt;value&gt;bill@shakespeare.lit&lt;/value&gt;
        &lt;value&gt;hecate@shakespeare.lit&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 84. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='edit-admin-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#edit-admin'
           sessionid='edit-admin:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.24 <a name="restart">Restart Service</a>
</h3>
    <p class="" style="">A service may allow an administrator to restart the service. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#restart&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 85. Admin Requests Restart of Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='restart-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#restart'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 86. Service Returns Restart Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='restart-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#restart'
           sessionid='restart:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Restarting the Service&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to restart the service.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Time delay before restarting'
             type='list-multi'
             var='delay'&gt;
        &lt;option label='30 seconds'&gt;&lt;value&gt;30&lt;/value&gt;&lt;/option&gt;
        &lt;option label='60 seconds'&gt;&lt;value&gt;60&lt;/value&gt;&lt;/option&gt;
        &lt;option label='90 seconds'&gt;&lt;value&gt;90&lt;/value&gt;&lt;/option&gt;
        &lt;option label='2 minutes'&gt;&lt;value&gt;120&lt;/value&gt;&lt;/option&gt;
        &lt;option label='3 minutes'&gt;&lt;value&gt;180&lt;/value&gt;&lt;/option&gt;
        &lt;option label='4 minutes'&gt;&lt;value&gt;180&lt;/value&gt;&lt;/option&gt;
        &lt;option label='5 minutes'&gt;&lt;value&gt;180&lt;/value&gt;&lt;/option&gt;
      &lt;/field&gt;
      &lt;field label='Announcement'
             type='text-multi'
             var='announcement'/&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 87. Admin Submits Restart Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='restart-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#restart'
           sessionid='restart:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='delay'&gt;
        &lt;value&gt;120&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='announcement'&gt;
        &lt;value&gt;The service will be restarted in 2 minutes!&lt;/value&gt;
        &lt;value&gt;Please log off now. --The Admins&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 88. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='restart-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#restart'
           sessionid='restart:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>4.25 <a name="shutdown">Shut Down Service</a>
</h3>
    <p class="" style="">A service may allow an administrator to shut down the service. The command node for this use case SHOULD be &quot;http://jabber.org/protocol/admin#shutdown&quot;.</p>
    <p class="" style="">A sample protocol flow for this use case is shown below.</p>
    <p class="caption">Example 89. Admin Requests Shut Down of Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='shutdown-1'
    to='shakespeare.lit'
    type='get'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/admin#shutdown'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Unless an error occurs (see the <a href="#errors">Error Handling</a> section below), the service SHOULD return the appropriate form.</p>
    <p class="caption">Example 90. Service Returns Shut Down Form to Admin</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='shutdown-1'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#shutdown'
           sessionid='shutdown:20040408T0337Z'
           status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Shutting Down the Service&lt;/title&gt;
      &lt;instructions&gt;Fill out this form to shut down the service.&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Time delay before shutting down'
             type='list-multi'
             var='delay'&gt;
        &lt;option label='30 seconds'&gt;&lt;value&gt;30&lt;/value&gt;&lt;/option&gt;
        &lt;option label='60 seconds'&gt;&lt;value&gt;60&lt;/value&gt;&lt;/option&gt;
        &lt;option label='90 seconds'&gt;&lt;value&gt;90&lt;/value&gt;&lt;/option&gt;
        &lt;option label='2 minutes'&gt;&lt;value&gt;120&lt;/value&gt;&lt;/option&gt;
        &lt;option label='3 minutes'&gt;&lt;value&gt;180&lt;/value&gt;&lt;/option&gt;
        &lt;option label='4 minutes'&gt;&lt;value&gt;180&lt;/value&gt;&lt;/option&gt;
        &lt;option label='5 minutes'&gt;&lt;value&gt;180&lt;/value&gt;&lt;/option&gt;
      &lt;/field&gt;
      &lt;field label='Announcement'
             type='text-multi'
             var='announcement'/&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 91. Admin Submits Shut Down Form to Service</p>
<div class="indent"><pre>
&lt;iq from='bill@shakespeare.lit/globe'
    id='shutdown-2'
    to='shakespeare.lit'
    type='set'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#shutdown'
           sessionid='shutdown:20040408T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='submit'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/admin&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='delay'&gt;
        &lt;value&gt;120&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='announcement'&gt;
        &lt;value&gt;The service will be shut down in 2 minutes!&lt;/value&gt;
        &lt;value&gt;Please log off now. --The Admins&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 92. Service Informs Admin of Completion</p>
<div class="indent"><pre>
&lt;iq from='shakespeare.lit'
    id='shutdown-2'
    to='bill@shakespeare.lit/globe'
    type='result'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#shutdown'
           sessionid='shutdown:20040408T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
<h2>5.
       <a name="errors">Error Handling</a>
</h2>
  <p class="" style="">Several error conditions are possible when an entity sends a command request to the service, as defined in the following table. If one of these error conditions occurs, the service MUST return an error stanza to the requesting entity.</p>
  <p class="caption">Table 1: Error Conditions</p>
<table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Condition</th>
      <th colspan="" rowspan="">Cause</th>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;conflict/&gt;</td>
      <td align="" colspan="" rowspan="">The command cannot be completed because of a data or system conflict (e.g., a user already exists with that username).</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;feature-not-implemented/&gt;</td>
      <td align="" colspan="" rowspan="">The specific command is not supported (even though the ad-hoc commands protocol is).</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;forbidden/&gt;</td>
      <td align="" colspan="" rowspan="">The requesting entity does not have sufficient privileges to perform the command.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;not-allowed/&gt;</td>
      <td align="" colspan="" rowspan="">No entity is allowed to perform the command (e.g., retrieve the CEO's roster).</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;service-unavailable/&gt;</td>
      <td align="" colspan="" rowspan="">The ad-hoc commands protocol is not supported.</td>
    </tr>
  </table>
  <p class="" style="">For the syntax of these errors, see <span class="ref">Error Condition Mappings</span>  [<a href="#nt-id2605550">7</a>]. Naturally, other errors may be returned as well (e.g., &lt;internal-server-error/&gt; if the service cannot be shut down).</p> 
<h2>6.
       <a name="security">Security Considerations</a>
</h2>
  <p class="" style="">The ability to complete the administrative tasks specified herein MUST NOT be granted to users who lack service-level administrative privileges.</p>
<h2>7.
       <a name="iana">IANA Considerations</a>
</h2>
  <p class="" style="">This JEP requires no interaction with the <span class="ref">Internet Assigned Numbers Authority (IANA)</span>  [<a href="#nt-id2605697">8</a>].</p>
<h2>8.
       <a name="registrar">Jabber Registrar Considerations</a>
</h2>
  <p class="" style="">The <span class="ref">Jabber Registrar</span>  [<a href="#nt-id2605639">9</a>] shall include the following information in its registries.</p>
  <div class="indent">
<h3>8.1 <a name="registrar-protocol">Protocol Namespaces</a>
</h3>
    <p class="" style="">Upon advancement of this JEP to a status of Active, the Jabber Registrar shall add &quot;http://jabber.org/protocol/admin&quot; to its registry of protocol namespaces.</p>
  </div>
  <div class="indent">
<h3>8.2 <a name="registrar-formtype">Field Standardization</a>
</h3>
    <p class="" style="">
<span class="ref">Field Standardization for Data Forms</span>  [<a href="#nt-id2605810">10</a>] defines a process for standardizing the fields used within Data Forms scoped by a particular namespace. The reserved fields for the 'http://jabber.org/protocol/admin' namespace are specified below.</p>
    <p class="caption">Registry Submission</p>
<div class="indent"><pre>
&lt;form_type&gt;
  &lt;name&gt;http://jabber.org/protocol/admin&lt;/name&gt;
  &lt;doc&gt;JEP-0133&lt;/doc&gt;
  &lt;desc&gt;Forms used for administration of servers and components.&lt;/desc&gt;
  &lt;field var='adminlist'
         type='jid-multi'
         var='A list of entities with administrative privileges'/&gt;
  &lt;field var='announcement'
         type='text-multi'
         label='The text of an announcement to be sent to active users or all users'/&gt;
  &lt;field var='blacklist'
         type='jid-multi'
         var='A list of entities with whom communication is blocked'/&gt;
  &lt;field var='delay'
         type='list-multi'
         var='The number of seconds to delay before applying a change'/&gt;
  &lt;field var='email'
         type='text-single'
         label='The email address for a user'/&gt;
  &lt;field var='firstname'
         type='text-single'
         label='The given (first) name of a user'/&gt;
  &lt;field var='jid'
         type='jid-single'
         label='The Jabber ID of a user or other entity'/&gt;
  &lt;field var='motd'
         type='text-multi'
         label='The text of a message of the day'/&gt;
  &lt;field var='password'
         type='text-private'
         label='The password for an account'/&gt;
  &lt;field var='password-verify'
         type='text-private'
         label='Password verification'/&gt;
  &lt;field var='surname'
         type='text-single'
         label='The family (last) name of a user'/&gt;
  &lt;field var='userlist'
         type='jid-multi'
         var='A list of registered entities'/&gt;
  &lt;field var='welcome'
         type='text-multi'
         label='The text of a welcome message'/&gt;
  &lt;field var='whitelist'
         type='jid-multi'
         var='A list of entities with whom communication is allowed'/&gt;
&lt;/form_type&gt;
    </pre></div>
  </div>
<h2>9.
       <a name="sect-id2605726">XML Schema</a>
</h2>
  <p class="" style="">Because the protocol defined here is a profile of <span style="font-weight: bold">JEP-0050: Ad-Hoc Commands</span>, no schema definition is needed.</p>
<p><hr></p>
<a name="notes"></a><h2>Notes</h2>
<p>
<a name="nt-id2596176">1</a>. JEP-0045: Multi-User Chat &lt;<a href="http://www.jabber.org/jeps/jep-0045.html">http://www.jabber.org/jeps/jep-0045.html</a>&gt;.</p>
<p>
<a name="nt-id2596199">2</a>. JEP-0050: Ad-Hoc Commands &lt;<a href="http://www.jabber.org/jeps/jep-0050.html">http://www.jabber.org/jeps/jep-0050.html</a>&gt;.</p>
<p>
<a name="nt-id2596150">3</a>. JEP-0030: Service Discovery &lt;<a href="http://www.jabber.org/jeps/jep-0030.html">http://www.jabber.org/jeps/jep-0030.html</a>&gt;.</p>
<p>
<a name="nt-id2601968">4</a>. JEP-0004: Data Forms &lt;<a href="http://www.jabber.org/jeps/jep-0004.html">http://www.jabber.org/jeps/jep-0004.html</a>&gt;.</p>
<p>
<a name="nt-id2603233">5</a>. RFC 3921: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://www.ietf.org/rfc/rfc3921.txt">http://www.ietf.org/rfc/rfc3921.txt</a>&gt;.</p>
<p>
<a name="nt-id2603470">6</a>. RFC 3920: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a href="http://www.ietf.org/rfc/rfc3920.txt">http://www.ietf.org/rfc/rfc3920.txt</a>&gt;.</p>
<p>
<a name="nt-id2605550">7</a>. JEP-0086: Error Condition Mappings &lt;<a href="http://www.jabber.org/jeps/jep-0086.html">http://www.jabber.org/jeps/jep-0086.html</a>&gt;.</p>
<p>
<a name="nt-id2605697">8</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p>
<p>
<a name="nt-id2605639">9</a>. The Jabber Registrar maintains a list of reserved Jabber protocol namespaces as well as registries of parameters used in the context of protocols approved by the Jabber Software Foundation. For further information, see &lt;<a href="http://www.jabber.org/registrar/">http://www.jabber.org/registrar/</a>&gt;.</p>
<p>
<a name="nt-id2605810">10</a>. JEP-0068: Field Data Standardization for Data Forms &lt;<a href="http://www.jabber.org/jeps/jep-0068.html">http://www.jabber.org/jeps/jep-0068.html</a>&gt;.</p>
<p><hr></p>
<a name="revs"></a><h2>Revision History</h2>
<div class="indent">
<h4>Version 0.3 (2004-09-30)</h4>
<div class="indent">Changed command naming requirement from MUST to SHOULD. (psa)
    </div>
<h4>Version 0.2 (2004-07-22)</h4>
<div class="indent">Added several more use cases; defined complete protocol flows; specified Jabber Registrar considerations. (psa)
    </div>
<h4>Version 0.1 (2004-04-25)</h4>
<div class="indent">Initial version. (psa)
    </div>
</div>
<p><hr></p>
<p>END</p>
</body>
</html>
