<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>XEP-0504: Data Policy</title><style type="text/css">
/* don't mind this hack */
nav#toc h2:before {
display: none;
content: "XEP-0504";
}
        </style><link rel="stylesheet" type="text/css" href="xmpp.css"><link href="prettify.css" type="text/css" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><script type="text/javascript" src="prettify.js"></script><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="DC.Title" content="Data Policy"><meta name="DC.Creator" content="Jérôme Poisson"><meta name="DC.Description" content="This document specifies metadata on how an entity handles its data (encryption, data retention, etc)."><meta name="DC.Publisher" content="XMPP Standards Foundation"><meta name="DC.Contributor" content="XMPP Extensions Editor"><meta name="DC.Date" content="2025-06-09"><meta name="DC.Type" content="XMPP Extension Protocol"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="XEP-0504"><meta name="DC.Language" content="en"><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright © 1999 – 2024 by the XMPP Standards Foundation (XSF)."></head><body onload="prettyPrint()"><h1>XEP-0504: Data Policy</h1><div class="docmeta-wrap"><dl id="docmeta" class="compact"><dt>Abstract</dt><dd>This document specifies metadata on how an entity handles its data (encryption, data retention, etc).</dd><dt>Author</dt><dd>Jérôme Poisson</dd><dt>Copyright</dt><dd>© 2025 – 2025 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</dd><dt>Status</dt><dd><p>Experimental</p><div id="status-notice" class="experimental standards track">WARNING: This Standards-Track document is Experimental. Publication as an XMPP Extension Protocol does not imply approval of this proposal by the XMPP Standards Foundation. Implementation of the protocol described herein is encouraged in exploratory implementations, but production systems are advised to carefully consider whether it is appropriate to deploy implementations of this protocol before it advances to a status of Draft.</div></dd><dt>Type</dt><dd>Standards Track</dd><dt>Version</dt><dd>0.1.0 (2025-06-09)</dd></dl><div class="timeline-wrap"><div class="timeline-head">Document Lifecycle</div><ol class="timeline"><li class="current">Experimental</li><li>Proposed</li><li>Stable</li><li>Final</li></ol></div></div><nav id="toc"><a href="#top"><h2>Table of Contents</h2></a><ol class="toc"><li><a href="#intro">Introduction</a></li><li><a href="#reqs">Requirements</a></li><li><a href="#data_policy">Exposing Data Policy</a><ol><li><a href="#auth_mechanism">Auth Mechanism</a></li><li><a href="#encryption">Encryption</a></li><li><a href="#retention">Data Retention</a></li><li><a href="#deletion">Data Deletion</a></li><li><a href="#encryption_at_rest">Encryption at Rest</a></li><li><a href="#tos">Terms of Service</a></li><li><a href="#location">Location</a></li><li><a href="#data_export">Data Export</a></li><li><a href="#access_policy">Access Policy</a></li><li><a href="#full_erasure">Full Erasure</a></li><li><a href="#backup_frequency">Backup Frequency</a></li><li><a href="#backup_retention">Backup Retention</a></li><li><a href="#extra">Extra Infos</a></li></ol></li><li><a href="#summary">Summary</a></li><li><a href="#example">Example</a></li><li><a href="#impl">Implementation Notes</a></li><li><a href="#security">Security Considerations</a></li><li><a href="#iana">IANA Considerations</a></li><li><a href="#registrar">XMPP Registrar Considerations</a></li><li><a href="#schema">XML Schema</a></li></ol><h6><a href="#appendices">Appendices</a></h6><ol class="toc-appendices"><li><a href="#appendix-docinfo">Document Information</a></li><li><a href="#appendix-authorinfo">Author Information</a></li><li><a href="#appendix-legal">Legal Notices</a></li><li><a href="#appendix-xmpp">Relation to XMPP</a></li><li><a href="#appendix-discuss">Discussion Venue</a></li><li><a href="#appendix-conformance">Requirements Conformance</a></li><li><a href="#appendix-notes">Notes</a></li><li><a href="#appendix-revs">Revision History</a></li><li><a href="#appendix-biblatex">Bib(La)Tex Entry</a></li></ol></nav><h2 id="intro">1.
       Introduction<a class="anchor-link" href="#intro"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">It is important for a service user to know how its data are handled: where data are stored, whether encryption is used and how, which jurisdiction applies, etc.</p>
  <p class="" style="">This document specifies fields to use with <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0128.html">Service Discovery Extensions (XEP-0128)</a></span>  [<a href="#nt-id24">1</a>] to expose that information and is usable with any kind of XMPP entity (XMPP server, gateways, pubsub services, etc.). It is expected that those data are properly filled and exposed to end-users in an easy-to-understand way by XMPP clients.</p>
<h2 id="reqs">2.
       Requirements<a class="anchor-link" href="#reqs"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">The goals of this specification are:</p>
  <ul class="" style="">
    <li class="" style="">Expose enough data policy information so end-users can obtain detailed information on how their data are handled.</li>
    <li class="" style="">Be usable with any kind of XMPP entity.</li>
    <li class="" style="">Use as much as possible existing specifications to expose those data.</li>
    <li class="" style="">Avoid duplicating information: if information is already easily available with another XMPP specification/disco feature, and no other important information is needed, do not duplicate it.</li>
  </ul>
<h2 id="data_policy">3.
       Exposing Data Policy<a class="anchor-link" href="#data_policy"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">Data policy is exposed via <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0128.html">Service Discovery Extensions (XEP-0128)</a></span>  [<a href="#nt-id24">1</a>]: in response to a disco#info query sent to the bare JID of the entity, the implementation MUST return a data form using the 'FORM_TYPE' of "urn:xmpp:data-policy:0" as specified in <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0128.html">Service Discovery Extensions (XEP-0128)</a></span>  [<a href="#nt-id24">1</a>].</p>
  <p class="" style="">This form can be used with any kind of XMPP entity. It is specially expected to be used with XMPP entities having one of the following identity categories: "collaboration", "conference", "pubsub", "server", and "store", but it can be used with any kind of entity.</p>
  <p class="" style="">If the service is proxying data to another (e.g., a gateway, or a storage service using another provider), the data form with a 'FORM_TYPE' of 'urn:xmpp:data-policy:0' applies to the policy of the service/gateway itself. The policy of the legacy network is specified by using the scope "urn:xmpp:data-policy:identity:&lt;category&gt;:&lt;type&gt;:0" where <em>&lt;category&gt;</em> and <em>&lt;type&gt;</em> are the category and type of the corresponding disco identity, as found in &lt;<a href="https://xmpp.org/registrar/disco-categories.html">https://xmpp.org/registrar/disco-categories.html</a>&gt;. That means that a service exposing data policy MUST have at least one main form with the "urn:xmpp:data-policy:0" scope for the service itself, and SHOULD have one identity-tied form per legacy service. This way, a user can see exactly how its data are used when using a gateway with a specific legacy network.</p>
  <p class="" style="">The rest of this section describes the fields that MAY be used in this form.</p>
  <div class="indent"><h3 id="auth_mechanism">3.1 Auth Mechanism<a class="anchor-link" href="#auth_mechanism"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">A field indicates how login data is used (login/password or equivalent data used for authentication). This field MUST have a 'var' attribute set to "auth_data", must be of type "list-single", and MUST have one of the following values:</p>
    <ul class="" style="">
      <li class="" style=""><strong>no_auth</strong>: the service does not require authentication.</li>
      <li class="" style=""><strong>plain</strong>: the service receives the authentication data in plain text, meaning that it can access them and potentially copy them.</li>
      <li class="" style=""><strong>hidden</strong>: the auth data are used but not seen by the service, because a technique to hide it (such as using a challenge to verify it) is used.</li>
      <li class="" style=""><strong>restricted</strong>: no full authentication is used, instead a temporary access is given via a mechanism such as a token or OAuth, and the access is restricted in scope (i.e., what it is possible to do with the account) and time.</li>
    </ul>
  </div>
  <div class="indent"><h3 id="encryption">3.2 Encryption<a class="anchor-link" href="#encryption"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">While clients can obviously already determine if they can use end-to-end encryption with a service, they have no way to know if a service acting as a proxy/gateway does send its data encrypted or not to third-party services. For instance, a client can send data end-to-end encrypted to a gateway using <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0384.html">OMEMO Encryption (XEP-0384)</a></span>  [<a href="#nt-id25">2</a>], and then the gateway decrypts it and may send it in a totally different way, even unencrypted! This could give a false sense of security to the end-user, as it would appear as end-to-end encrypted in most clients (while in reality it's only e2ee between the client and the gateway/proxy).</p>
    <p class="" style="">To make the situation more clear, a data transmission field SHOULD be used, indicating how the data is transmitted from and to legacy services (this field doesn't specify how data is transmitted between the XMPP client and the service itself). The field MUST have a 'var' attribute set to "data_transmission", a type of "list-single". The value MUST be one of the following:</p>
    <ul class="" style="">
      <li class="" style=""><strong>plain</strong>: the data is sent without any encryption. It may be viewed by anybody with access to the network between the XMPP service and the destination.</li>
      <li class="" style=""><strong>encrypted</strong>: the data is encrypted, but not end-to-end (e.g., with something such as TLS). It may be viewed by the XMPP service, the legacy service administrators, and the destination.</li>
      <li class="" style=""><strong>e2e</strong>: the data is encrypted using an end-to-end algorithm, which SHOULD be specified with the encryption algorithm field (see below). It may be seen by the XMPP service and the destination.</li>
      <li class="" style=""><strong>gre</strong>: Gateway Relayed Encryption is used: the data is encrypted by the XMPP client, passed by the XMPP service, and decrypted by the destination. Only the destination can see the data. When used, XMPP clients MUST ensure that GRE is actually used by the gateway.</li>
    </ul>
    <p class="" style="">When "encrypted" or "e2e" values are used in the previous field, the algorithm used SHOULD be specified with a field with a "var" attribute of "encryption_algorithm", with a type of "text-single", and with the human-readable name of the algorithm used (e.g., "TLSv1.3"). This is not necessary when "gre" is used, as this data is already known by the client in this case.</p>
  </div>
  <div class="indent"><h3 id="retention">3.3 Data Retention<a class="anchor-link" href="#retention"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">The data retention field indicates for how long data such as messages or files are stored on the service. The field MUST have a 'var' attribute set to "data_retention", be of type "text-single", and MUST indicate how long data is stored (at most) in hours. The following values have special meaning:</p>
    <ul class="" style="">
      <li class="" style=""><strong>0</strong>: data is not stored and is used in transit in this service. Note that the data can still be stored by another service if this one is a proxy or a gateway (this can be checked with the service-tied form).</li>
      <li class="" style=""><strong>infinite</strong>: data is stored without automatic purge. Depending on the service, the user may or may not handle data deletion themselves (this is specified with the "data_deletion" field, see below).</li>
      <li class="" style=""><strong>unknown</strong>: data retention of this service cannot be determined. This can happen when the service is a gateway to another service, and data retention policy is not known.</li>
    </ul>
  </div>
  <div class="indent"><h3 id="deletion">3.4 Data Deletion<a class="anchor-link" href="#deletion"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">The data deletion field indicates if a user can explicitly delete data on this service (via ad-hoc commands, pubsub semantics, or any easy-to-use method). The field MUST have a 'var' attribute set to "data_deletion", and be of type "boolean". It defaults to "false".</p>
  </div>
  <div class="indent"><h3 id="encryption_at_rest">3.5 Encryption at Rest<a class="anchor-link" href="#encryption_at_rest"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">When data retention has a value other than "0", it is important to know how the data is encrypted at rest. This is exposed with a field which MUST have a 'var' attribute set to "encryption_at_rest", a type of "boolean", set to "true" when data is encrypted at rest. It defaults to "false".</p>
  </div>
  <div class="indent"><h3 id="tos">3.6 Terms of Service<a class="anchor-link" href="#tos"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">A link to Terms of Service (ToS) can be specified with a field which MUST have a 'var' attribute set to "tos" and a type of "text-single". The value MUST be an URI to the ToS. The link can be an xmpp: URI (e.g., to a Pubsub item), an http(s) one, or using any kind of relevant scheme. As for other fields, if a proxy or a gateway is used, the ToS of the main scope applies to the service itself, while the ToS of legacy services use the identity-scoped forms.</p>
  </div>
  <div class="indent"><h3 id="location">3.7 Location<a class="anchor-link" href="#location"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">Physical location of the data is very important information for the user: it determines the jurisdiction that applies, and it also indicates risks (e.g., natural disasters, geopolitical considerations, war zones, risks of spying, etc.).</p>
    <p class="" style="">There is already a specification to indicate the location of an XMPP entity: <span class="ref" style=""><a href="https://xmpp.org/extensions/xep-0080.html">User Geolocation (XEP-0080)</a></span>  [<a href="#nt-id26">3</a>], which should be used to indicate the location of the server via the pep node "http://jabber.org/protocol/geoloc" as explained in the specification. However, data may be in different locations at once (with a cluster of servers), in which case multiple items should be used in the pep node, one per data cluster. Item IDs may give a hint on the related data (e.g., cluster name), and XEP-0080's "description" field should be used to give details on this cluster and when/how data is stored there.</p>
    <p class="" style="">The "region" field of XEP-0080 SHOULD be duly specified, as it is information of major importance in the context of data policy: the law may differ from one administrative region to another within a given country.</p>
  </div>
  <div class="indent"><h3 id="data_export">3.8 Data Export<a class="anchor-link" href="#data_export"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">A field indicating whether users can export all their data from the service. This field MUST have a 'var' attribute set to "data_export" and a type of "boolean". The default value is "false".</p>
  </div>
  <div class="indent"><h3 id="access_policy">3.9 Access Policy<a class="anchor-link" href="#access_policy"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">A field indicating who has access to user accounts or data. This field MUST have a 'var' attribute set to "access_policy", a type of "list-multi", and MUST include one or more of the following values:</p>
    <ul class="" style="">
      <li class="" style=""><strong>admins</strong>: Administrators of the service can access user data for operational or security purposes (e.g., account management, system maintenance).</li>
      <li class="" style=""><strong>moderators</strong>: Moderators (e.g., for group chats or blog comments) can access user data within their moderation scope (e.g., content review, enforcement of community guidelines).</li>
      <li class="" style=""><strong>organization_member</strong>: Any member of the organization owning the service can access user data (e.g., employees, contractors under the organization's control).</li>
      <li class="" style=""><strong>government</strong>: Government or legal authorities can access user data under legal requirements (e.g., court orders, national security requests).</li>
      <li class="" style=""><strong>advertisers</strong>: Third-party advertisers or ad networks can access user data for targeted advertising or analytics.</li>
      <li class="" style=""><strong>partners</strong>: Business partners or affiliated services can access user data under contractual or collaborative agreements.</li>
      <li class="" style=""><strong>none</strong>: No entity (other than the user) can access user data. If used, this value MUST be the only one selected.</li>
    </ul>
  </div>
  <div class="indent"><h3 id="full_erasure">3.10 Full Erasure<a class="anchor-link" href="#full_erasure"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">A field indicating whether users can fully erase their account and associated data. This field MUST have a 'var' attribute set to "full_erasure" and a type of "boolean". The default value is "false".</p>
  </div>
  <div class="indent"><h3 id="backup_frequency">3.11 Backup Frequency<a class="anchor-link" href="#backup_frequency"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">A field indicating how often backups of user data are performed. This field MUST have a 'var' attribute set to "backup_frequency" and a type of "text-single". The value MUST specify the maximum frequency in hours between backups. A value of "0" indicates that no backups are performed. For example, a value of "24" indicates backups occur at most every 24 hours (i.e., daily). This field is RECOMMENDED for services storing user data.</p>
  </div>
  <div class="indent"><h3 id="backup_retention">3.12 Backup Retention<a class="anchor-link" href="#backup_retention"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">A field indicating how long backups are retained. This field MUST have a 'var' attribute set to "backup_retention" and a type of "text-single". The value MUST specify the maximum duration in hours. The following special values can be used:</p>
    <ul class="" style="">
      <li class="" style=""><strong>0</strong>: No backup is done.</li>
      <li class="" style=""><strong>infinite</strong>: Backups are retained indefinitely.</li>
      <li class="" style=""><strong>unknown</strong>: Backup retention policies are not publicly disclosed.</li>
    </ul>
  </div>
  <div class="indent"><h3 id="extra">3.13 Extra Infos<a class="anchor-link" href="#extra"><abbr title="Link to this point in the document">¶</abbr></a></h3>
    <p class="" style="">Human-readable information can be added with a field which MUST have a 'var' attribute set to "extra_info" and a type of "text-multi". This is useful to add extra details, precision, or any kind of information that end-users may need to know. The "xml:lang" attribute of the disco#info request can be used to determine the language of the description returned by the service.</p>
  </div>
<h2 id="summary">4.
       Summary<a class="anchor-link" href="#summary"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">Below is a table summarizing all fields defined in this XEP for data policy discovery. All fields are optional. Fields with special constraints are noted in the "Comment" column.</p>
  <figure class="table"><figcaption id="table-1"><strong>Table 1:</strong> Data Policy Fields Summary<a class="anchor-link" href="#table-1"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><table>
    <tr class="body">
      <th colspan="" rowspan="">Name</th>
      <th colspan="" rowspan="">Field (var)</th>
      <th colspan="" rowspan="">Type</th>
      <th colspan="" rowspan="">Meaning</th>
      <th colspan="" rowspan="">Comment</th>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Auth Mechanism</td>
      <td align="" colspan="" rowspan="">auth_data</td>
      <td align="" colspan="" rowspan="">list-single</td>
      <td align="" colspan="" rowspan="">How authentication data is handled by the service</td>
      <td align="" colspan="" rowspan="">Values: no_auth, plain, hidden, restricted</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Data Transmission</td>
      <td align="" colspan="" rowspan="">data_transmission</td>
      <td align="" colspan="" rowspan="">list-single</td>
      <td align="" colspan="" rowspan="">How data is transmitted to/from legacy services</td>
      <td align="" colspan="" rowspan="">Values: plain, encrypted, e2e, gre</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Encryption Algorithm</td>
      <td align="" colspan="" rowspan="">encryption_algorithm</td>
      <td align="" colspan="" rowspan="">text-single</td>
      <td align="" colspan="" rowspan="">Name of the encryption algorithm used</td>
      <td align="" colspan="" rowspan="">Required if data_transmission is "encrypted" or "e2e"</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Data Retention</td>
      <td align="" colspan="" rowspan="">data_retention</td>
      <td align="" colspan="" rowspan="">text-single</td>
      <td align="" colspan="" rowspan="">Maximum time (in hours) data is stored</td>
      <td align="" colspan="" rowspan="">Special values: 0, infinite, unknown</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Data Deletion</td>
      <td align="" colspan="" rowspan="">data_deletion</td>
      <td align="" colspan="" rowspan="">boolean</td>
      <td align="" colspan="" rowspan="">Whether users can explicitly delete data</td>
      <td align="" colspan="" rowspan="">Defaults to false</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Encryption at Rest</td>
      <td align="" colspan="" rowspan="">encryption_at_rest</td>
      <td align="" colspan="" rowspan="">boolean</td>
      <td align="" colspan="" rowspan="">Whether data is encrypted when stored</td>
      <td align="" colspan="" rowspan="">Defaults to false</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Terms of Service</td>
      <td align="" colspan="" rowspan="">tos</td>
      <td align="" colspan="" rowspan="">text-single</td>
      <td align="" colspan="" rowspan="">URI to the service's Terms of Service</td>
      <td align="" colspan="" rowspan="">May be xmpp:, http(s), or other URI schemes</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Data Export</td>
      <td align="" colspan="" rowspan="">data_export</td>
      <td align="" colspan="" rowspan="">boolean</td>
      <td align="" colspan="" rowspan="">Whether users can export their data</td>
      <td align="" colspan="" rowspan="">Defaults to false</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Access Policy</td>
      <td align="" colspan="" rowspan="">access_policy</td>
      <td align="" colspan="" rowspan="">list-multi</td>
      <td align="" colspan="" rowspan="">Entities that can access user data</td>
      <td align="" colspan="" rowspan="">Values: admins, moderators, organization_member, government, advertisers, partners, none</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Full Erasure</td>
      <td align="" colspan="" rowspan="">full_erasure</td>
      <td align="" colspan="" rowspan="">boolean</td>
      <td align="" colspan="" rowspan="">Whether users can fully erase their account and data</td>
      <td align="" colspan="" rowspan="">Defaults to false</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Backup Frequency</td>
      <td align="" colspan="" rowspan="">backup_frequency</td>
      <td align="" colspan="" rowspan="">text-single</td>
      <td align="" colspan="" rowspan="">Maximum interval (in hours) between backups</td>
      <td align="" colspan="" rowspan="">Value in hours; "0" indicates no backup</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Backup Retention</td>
      <td align="" colspan="" rowspan="">backup_retention</td>
      <td align="" colspan="" rowspan="">text-single</td>
      <td align="" colspan="" rowspan="">Maximum time (in hours) backups are retained</td>
      <td align="" colspan="" rowspan="">Special values: 0, infinite, unknown</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Extra Info</td>
      <td align="" colspan="" rowspan="">extra_info</td>
      <td align="" colspan="" rowspan="">text-multi</td>
      <td align="" colspan="" rowspan="">Human-readable additional information</td>
      <td align="" colspan="" rowspan=""></td>
    </tr>
  </table></figure>
<h2 id="example">5.
       Example<a class="anchor-link" href="#example"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">This example shows a gateway providing SMTP/IMAP bridging with two forms in its disco#info response: one for the main gateway service (which does not store data) and one for the SMTP identity (which clarifies that policies depend on the user's chosen external server).</p>

  <figure class="code-example" id="example-1"><figcaption><strong>Example 1.</strong> Entity queries gateway for data policy<a class="anchor-link" href="#example-1"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='get'
  from='juliet@capulet.lit/balcony'
  to='gateway@example.org'
  id='disco_1'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
  </pre></figure>

  <figure class="code-example" id="example-2"><figcaption><strong>Example 2.</strong> Gateway responds with two data-policy forms<a class="anchor-link" href="#example-2"><abbr title="Link to this point in the document">¶</abbr></a></figcaption><pre class="prettyprint">
&lt;iq type='result'
    from='gateway@example.org'
    to='juliet@capulet.lit/balcony'
    id='disco_1'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;identity category='gateway' type='smtp'/&gt;
    &lt;feature var='http://jabber.org/protocol/disco#info'/&gt;
    &lt;x xmlns='jabber:x:data' type='result'&gt;
      &lt;!-- Main data-policy form for the gateway itself --&gt;
      &lt;field var='FORM_TYPE' type='hidden'&gt;
        &lt;value&gt;urn:xmpp:data-policy:0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='auth_data' type='list-single'&gt;
        &lt;value&gt;plain&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='data_transmission' type='list-single'&gt;
        &lt;value&gt;plain&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='data_retention' type='text-single'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='data_deletion' type='boolean'&gt;
        &lt;value&gt;false&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;

    &lt;x xmlns='jabber:x:data' type='result'&gt;
      &lt;!-- Identity-scoped form for SMTP gateway --&gt;
      &lt;field var='FORM_TYPE' type='hidden'&gt;
        &lt;value&gt;urn:xmpp:data-policy:identity:gateway:smtp:0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field var='extra_info' type='text-multi'&gt;
        &lt;value&gt;This gateway acts as a relay to external IMAP/SMTP servers. Data policies depend entirely on the external server chosen by the user. This gateway does not store or process user data.&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/query&gt;
&lt;/iq&gt;
  </pre></figure>
<h2 id="impl">6.
       Implementation Notes<a class="anchor-link" href="#impl"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">Client developers are encouraged to present data policy information in ways that are intuitive and accessible to all users, including those without technical expertise. While this specification defines detailed metadata fields, clients should prioritize visual indicators (e.g., security badges, warning icons) to summarize key privacy and security aspects at a glance. For example:</p>
  <ul class="" style="">
    <li class="" style="">Use color-coded badges to indicate encryption status (e.g., green for end-to-end encryption, red for unencrypted transmission).</li>
    <li class="" style="">Display warning symbols for services with unclear data retention policies or third-party access.</li>
    <li class="" style="">Provide tooltips or expandable sections to show technical details on demand.</li>
    <li class="" style="">Include a security rating (e.g., a percentage score, a mark out of 10, or letter grades) to give users a quick overview of a service's overall security posture.</li>
  </ul>
  <p class="" style="">This approach ensures users receive actionable insights without being overwhelmed by technical specifications, and helps them make informed decisions about which services to trust.</p>
<h2 id="security">7.
       Security Considerations<a class="anchor-link" href="#security"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">The information exposed in this document is highly useful to end-users to understand what happens to their data. However, it can also provide information to potential attackers (e.g., server location, who can access data, etc.). Service administrators should keep this in mind and find the right balance between providing legitimate end-user information and avoiding disclosure of too many details usable by attackers.</p>
<h2 id="iana">8.
       IANA Considerations<a class="anchor-link" href="#iana"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">TODO</p>
<h2 id="registrar">9.
       XMPP Registrar Considerations<a class="anchor-link" href="#registrar"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">TODO</p>
<h2 id="schema">10.
       XML Schema<a class="anchor-link" href="#schema"><abbr title="Link to this point in the document">¶</abbr></a></h2>
  <p class="" style="">TODO</p>
<hr><a name="appendices"></a><h2>Appendices</h2><h3 id="appendix-docinfo">Appendix A: Document Information<a class="anchor-link" href="#appendix-docinfo"><abbr title="Link to this point in the document">¶</abbr></a></h3><dl class="compact"><dt>Series</dt><dd><a href="https://xmpp.org/extensions/">XEP</a></dd><dt>Number</dt><dd>0504</dd><dt>Publisher</dt><dd><a href="/xsf/">XMPP Standards Foundation</a></dd><dt>Status</dt><dd><a href="https://xmpp.org/extensions/xep-0001.html#states-Experimental">Experimental</a></dd><dt>Type</dt><dd><a href="https://xmpp.org/extensions/xep-0001.html#types-Standards%20Track">Standards Track</a></dd><dt>Version</dt><dd>0.1.0</dd><dt>Last Updated</dt><dd>2025-06-09</dd><dt>Approving Body</dt><dd><a href="https://xmpp.org/council/">XMPP Council</a></dd><dt>Dependencies</dt><dd>XMPP Core, <a href="xep-0030.html">XEP-0030</a>, <a href="xep-0128.html">XEP-0128</a>, <a href="xep-0080.html">XEP-0080</a></dd><dt>Supersedes</dt><dd>None</dd><dt>Superseded By</dt><dd>None</dd><dt>Short Name</dt><dd>data-policy</dd><dt>Source Control</dt><dd><a class="standardsButton" href="https://github.com/xsf/xeps/blob/master/xep-0504.xml">HTML</a></dd></dl><p>
          This document in other formats:
          <a class="standardsButton" href="https://xmpp.org/extensions/xep-0504.xml">XML</a> 
          <a class="standardsButton" href="https://xmpp.org/extensions/xep-0504.pdf">PDF</a></p><h3 id="appendix-authorinfo">Appendix B: Author Information<a class="anchor-link" href="#appendix-authorinfo"><abbr title="Link to this point in the document">¶</abbr></a></h3><h5>Jérôme Poisson</h5><dl class="compact"><dt>Email</dt><dd><a href="mailto:goffi@goffi.org">goffi@goffi.org</a></dd><dt>JabberID</dt><dd><a href="xmpp:goffi@jabber.fr">goffi@jabber.fr</a></dd></dl><h3 id="appendix-legal">Appendix C: Legal Notices<a class="anchor-link" href="#appendix-legal"><abbr title="Link to this point in the document">¶</abbr></a></h3><div class="indent"><h4>Copyright</h4><p>This XMPP Extension Protocol is copyright © 1999 – 2024 by the <a href="https://xmpp.org/">XMPP Standards Foundation</a> (XSF).</p><h4>Permissions</h4><p>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.</p><h4>Disclaimer of Warranty</h4><p class="box info">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. ##</p><h4>Limitation of Liability</h4><p>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.</p><h4>IPR Conformance</h4><p>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which can be found at &lt;<a href="https://xmpp.org/about/xsf/ipr-policy">https://xmpp.org/about/xsf/ipr-policy</a>&gt; or obtained by writing to XMPP Standards Foundation, P.O. Box 787, Parker, CO 80134 USA).</p><h4>Visual Presentation</h4><p>The HTML representation (you are looking at) is maintained by the XSF. It is based on the <a href="http://yaml.de">YAML CSS Framework</a>, which is licensed under the terms of the <a href="https://creativecommons.org/licenses/by/2.0/">CC-BY-SA 2.0</a> license.</p></div><h3 id="appendix-xmpp">Appendix D: Relation to XMPP<a class="anchor-link" href="#appendix-xmpp"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 6120) and XMPP IM (RFC 6121) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h3 id="appendix-discuss">Appendix E: Discussion Venue<a class="anchor-link" href="#appendix-discuss"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="https://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p><p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="https://xmpp.org/community/">https://xmpp.org/community/</a>&gt; for a complete list.</p><p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><h3 id="appendix-conformance">Appendix F: Requirements Conformance<a class="anchor-link" href="#appendix-conformance"><abbr title="Link to this point in the document">¶</abbr></a></h3><p class="indent">
          The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
          "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
          "MAY", and "OPTIONAL" in this document are to be interpreted as
          described in <a href="https://tools.ietf.org/rfc/bcp/bcp14.txt">BCP 14</a>
          [<a href="https://www.ietf.org/rfc/rfc2119.txt">RFC2119</a>]
          [<a href="https://tools.ietf.org/rfc/rfc8174.txt">RFC8174</a>] when,
          and only when, they appear in all capitals, as shown here.
        </p><h3 id="appendix-notes">Appendix G: Notes<a class="anchor-link" href="#appendix-notes"><abbr title="Link to this point in the document">¶</abbr></a></h3><div class="indent"><p><a name="nt-id24">1</a>. XEP-0128: Service Discovery Extensions &lt;<a href="https://xmpp.org/extensions/xep-0128.html">https://xmpp.org/extensions/xep-0128.html</a>&gt;.</p><p><a name="nt-id25">2</a>. XEP-0384: OMEMO Encryption &lt;<a href="https://xmpp.org/extensions/xep-0384.html">https://xmpp.org/extensions/xep-0384.html</a>&gt;.</p><p><a name="nt-id26">3</a>. XEP-0080: User Geolocation &lt;<a href="https://xmpp.org/extensions/xep-0080.html">https://xmpp.org/extensions/xep-0080.html</a>&gt;.</p></div><h3 id="appendix-revs">Appendix H: Revision History<a class="anchor-link" href="#appendix-revs"><abbr title="Link to this point in the document">¶</abbr></a></h3><p>Note: Older versions of this specification might be available at <a href="https://xmpp.org/extensions/attic/">https://xmpp.org/extensions/attic/</a></p><ol class="revision-history"><li id="revision-history-v0.1.0"><div class="revision-head">Version <a href="https://xmpp.org/extensions/attic/xep-0504-0.1.0.html">0.1.0</a> (2025-06-09)<a class="anchor-link" href="#revision-history-v0.1.0"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">Accepted as Experimental by Concil vote on 2025-06-08</p>
    <div class="revision-author">XEP Editor: dg</div></li><li id="revision-history-v0.0.1"><div class="revision-head">Version <a href="https://xmpp.org/extensions/attic/xep-0504-0.0.1.html">0.0.1</a> (2025-06-13)<a class="anchor-link" href="#revision-history-v0.0.1"><abbr title="Link to this point in the document">¶</abbr></a></div><p class="" style="">First draft.</p><div class="revision-author">jp</div></li></ol><h3 id="appendix-biblatex">Appendix I: Bib(La)TeX Entry</h3><pre>
@report{poisson2025data-policy,
  title = {Data Policy},
  author = {Poisson, Jérôme},
  type = {XEP},
  number = {0504},
  version = {0.1.0},
  institution = {XMPP Standards Foundation},
  url = {https://xmpp.org/extensions/xep-0504.html},
  date = {2025-06-13/2025-06-09},
}</pre><p>END</p></body></html>
