<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0180: Jingle Video via RTP</title><link rel="stylesheet" type="text/css" href="/xmpp.css" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><meta name="DC.Title" content="Jingle Video via RTP" /><meta name="DC.Creator" content="Peter Saint-Andre" /><meta name="DC.Creator" content="Milton Chen" /><meta name="DC.Description" content="This specification defines a Jingle application type for negotiating a video chat or other video session. The application type uses the Real-time Transport Protocol (RTP) for the underlying media exchange and provides a straightforward mapping to Session Description Protocol (SDP) for interworking with SIP media endpoints." /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2008-02-28" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0180" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright (c) 1999 - 2008 by the XMPP Standards Foundation (XSF)." /></head><body><h1>XEP-0180: Jingle Video via RTP</h1><p>This specification defines a Jingle application type for negotiating a video chat or other video session. The application type uses the Real-time Transport Protocol (RTP) for the underlying media exchange and provides a straightforward mapping to Session Description Protocol (SDP) for interworking with SIP media endpoints.</p><hr /><p style="color:red">NOTICE: This document is currently within Last Call or under consideration by the XMPP Council for advancement to the next stage in the XSF standards process.</p><hr /><h2>Document Information</h2><p class="indent">
            Series: <a href="http://www.xmpp.org/extensions/">XEP</a><br />
            Number: 0180<br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status: 
            <a href="http://www.xmpp.org/extensions/xep-0001.html#states-Proposed">Proposed</a><br />
            Type:
            <a href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br />
            Version: 0.11<br />
            Last Updated: 2008-02-28<br />
                Approving Body: <a href="http://www.xmpp.org/council/">XMPP Council</a><br />Dependencies: XMPP Core, XEP-0166<br />
                Supersedes: None<br />
                Superseded By: None<br />
            Short Name: TO BE ASSIGNED<br />
              Wiki Page: &lt;<a href="http://wiki.jabber.org/index.php/Jingle Video via RTP (XEP-0180)">http://wiki.jabber.org/index.php/Jingle Video via RTP (XEP-0180)</a>&gt;
            </p><hr /><h2>Author Information</h2><div class="indent"><h3>Peter Saint-Andre</h3><p class="indent">
        JabberID: 
        <a href="xmpp:stpeter@jabber.org">stpeter@jabber.org</a><br />
        URI: 
        <a href="https://stpeter.im/">https://stpeter.im/</a><br /></p><h3>Milton Chen</h3><p class="indent">
        Email:
        <a href="mailto:Milton.Chen@vseelab.com">Milton.Chen@vseelab.com</a><br /></p></div><hr /><h2>Legal Notices</h2><div class="indent"><h3>Copyright</h3>This XMPP Extension Protocol is copyright (c) 1999 - 2008 by the XMPP Standards Foundation (XSF).<h3>Permissions</h3>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h3>Disclaimer of Warranty</h3><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. In no event shall the XMPP Standards Foundation or the authors of this Specification be liable for any claim, damages, or other liability, whether in an action of contract, tort, or otherwise, arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification. ##</span><h3>Limitation of Liability</h3>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising out of the use or inability to use the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h3>IPR Conformance</h3>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which may be found at &lt;<a href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt; or obtained by writing to XSF, P.O. Box 1641, Denver, CO 80201 USA).</div><hr /><h2>Discussion Venue</h2><p class="indent">The preferred venue for discussion of this document is the Standards discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">http://mail.jabber.org/mailman/listinfo/standards</a>&gt;.</p><p class="indent">Errata may be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><h2>Relation to XMPP</h2><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h2>Conformance Terms</h2><p class="indent">The following keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#intro">Introduction</a><br />2.  <a href="#reqs">Requirements</a><br />3.  <a href="#conformance">Jingle Conformance</a><br />4.  <a href="#format">Application Format</a><br />5.  <a href="#negotiation">Negotiating a Jingle Video Session</a><br />6.  <a href="#sdp">Mapping to Session Description Protocol</a><br />7.  <a href="#errors">Error Handling</a><br />8.  <a href="#support">Determining Support</a><br />9.  <a href="#info">Informational Messages</a><br />10.  <a href="#impl">Implementation Notes</a><br />   
      10.1.  <a href="#impl-codecs">Codecs</a><br />11.  <a href="#security">Security Considerations</a><br />12.  <a href="#iana">IANA Considerations</a><br />13.  <a href="#registrar">XMPP Registrar Considerations</a><br />   
      13.1.  <a href="#ns">Protocol Namespaces</a><br />   
      13.2.  <a href="#registrar-content">Jingle Application Formats</a><br />14.  <a href="#schema">XML Schemas</a><br />   
      14.1.  <a href="#schema-content">Application Format</a><br />   
      14.2.  <a href="#schema-errors">Errors</a><br /><a href="#notes">Notes</a><br /><a href="#revs">Revision History</a></p></div><hr /><h2>1.
       <a name="intro" id="intro">Introduction</a></h2>
  <p class="" style=""><span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0166.html">Jingle</a></span>  [<a href="#nt-id2251388">1</a>] can be used to initiate and negotiate a wide range of peer-to-peer sessions. One session type of interest is video chat. This document specifies a format for describing Jingle video sessions, where the media exchange occurs using the Real-time Transport Protocol (see <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3550">RFC 3550</a></span>  [<a href="#nt-id2251556">2</a>]).</p>
<h2>2.
       <a name="reqs" id="reqs">Requirements</a></h2>
  <p class="" style="">The Jingle application format defined herein is designed to meet the following requirements:</p>
  <ol start="" class="" style="">
    <li class="" style="">Enable negotiation of parameters necessary for video chat.</li>
    <li class="" style="">Map these parameters to the Session Description Protocol (SDP; see <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc4566">RFC 4566</a></span>  [<a href="#nt-id2251406">3</a>]) to enable interoperability.</li>
    <li class="" style="">Define informational messages related to video chat.</li>
  </ol>
<h2>3.
       <a name="conformance" id="conformance">Jingle Conformance</a></h2>
   <p class="" style="">In accordance with Section 8 of <span class="ref">XEP-0166</span>, this document specifies the following information related to the Jingle Video via RTP application type:</p>
   <ol start="" class="" style="">
     <li class="" style=""><p class="" style="">The application format negotiation process is defined in the <a href="#negotiation">Negotiating a Jingle Video Session</a> section of this document.</p></li>
     <li class="" style=""><p class="" style="">The semantics of the &lt;description/&gt; element are defined in the <a href="#format">Application Format</a> section of this document.</p></li>
     <li class="" style=""><p class="" style="">A mapping of Jingle semantics to the Session Description Protocol is provided in the <a href="#sdp">Mapping to Session Description Protocol</a> section of this document.</p></li>
     <li class="" style=""><p class="" style="">A Jingle video session SHOULD use a lossy transport method such as <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0177.html">Jingle Raw UDP Transport Method </a></span>  [<a href="#nt-id2251514">4</a>] or the "ice-udp" method specified in <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0176.html">Jingle ICE-UDP Transport Method</a></span>  [<a href="#nt-id2261195">5</a>].</p></li>
     <li class="" style="">
       <p class="" style="">Content is to be sent and received as follows:</p>
       <ul class="" style="">
         <li class="" style=""><p class="" style="">Outbound video content shall be encoded into RTP packets and each packet shall be sent individually over the transport. Each inbound packet received over the transport is an RTP packet.</p></li>
       </ul>
     </li>
   </ol>
<h2>4.
       <a name="format" id="format">Application Format</a></h2>
  <p class="" style="">A Jingle video session is described by a content type that contains one application format and one transport method. The application format consists of one or more encodings contained within a wrapper &lt;description/&gt; element qualified by the 'urn:xmpp:tmp:jingle:apps:video-rtp' namespace (see <a href="#ns">Protocol Namespaces</a> regarding issuance of one or more permanent namespaces). In the language of <span class="ref">RFC 4566</span> each encoding is a payload-type; therefore, each &lt;payload-type/&gt; element specifies an encoding that can be used for the audio stream, as illustrated in the following example.</p>
  <p class="caption"><a name="example-1" id="example-1"></a>Example 1. Video description format</p><div class="indent"><pre>
    &lt;description xmlns='urn:xmpp:tmp:jingle:apps:video-rtp'&gt;
      &lt;payload-type id='96' name='theora' clockrate='90000' height='720' width='1280'&gt;
        &lt;parameter name='delivery-method' value='inline'/&gt;
        &lt;parameter name='configuration' value='somebase16string'/&gt;
        &lt;parameter name='sampling' value='YCbCr-4:2:2'/&gt;
      &lt;/payload-type&gt;
      &lt;payload-type id='28' name='nv' clockrate='90000'/&gt;
      &lt;payload-type id='25' name='CelB' clockrate='90000'/&gt;
      &lt;payload-type id='32' name='MPV' clockrate='90000'/&gt;
    &lt;/description&gt;
  </pre></div>
  <p class="" style="">The &lt;description/&gt; element is intended to be a child of a &lt;content/&gt; element as specified in <span class="ref">XEP-0166</span>.</p>
  <p class="" style="">The &lt;description/&gt; element SHOULD possess a 'profile' attribute that specifies the profile of RTP in use as would be encapsulated in SDP (e.g., "RTP/AVP" or "UDP/TLS/RTP/SAVP").</p>
  <p class="" style="">The encodings SHOULD be provided in order of preference by placing the most-preferred &lt;payload-type/&gt; element as the first child of the &lt;description/&gt; element (etc.).</p>
  <p class="" style="">The allowable attributes of the &lt;payload-type/&gt; element are as follows:</p>
  <p class="caption"><a name="table-1" id="table-1"></a>Table 1: Payload-Type Attributes</p><table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Attribute</th>
      <th colspan="" rowspan="">Description</th>
      <th colspan="" rowspan="">Datatype/Units</th>
      <th colspan="" rowspan="">Inclusion</th>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">channels</td>
      <td colspan="" rowspan="">The number of channels (e.g., 2 for stereoscopic video)</td>
      <td colspan="" rowspan="">positiveInteger (defaults to 1)</td>
      <td colspan="" rowspan="">OPTIONAL</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">clockrate</td>
      <td colspan="" rowspan="">The sampling frequency in Hertz</td>
      <td colspan="" rowspan="">positiveInteger</td>
      <td colspan="" rowspan="">RECOMMENDED</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">height</td>
      <td colspan="" rowspan="">The vertical extent of the displayed video, in pixels</td>
      <td colspan="" rowspan="">positiveInteger</td>
      <td colspan="" rowspan="">RECOMMENDED</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">id</td>
      <td colspan="" rowspan="">A unique identifier for the payload type</td>
      <td colspan="" rowspan="">positiveInteger</td>
      <td colspan="" rowspan="">REQUIRED</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">layer</td>
      <td colspan="" rowspan="">The relationship of a layer to the "bottom" of the stack, where 0 = bottom (the first layer)</td>
      <td colspan="" rowspan="">nonNegativeInteger</td>
      <td colspan="" rowspan="">OPTIONAL</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">name</td>
      <td colspan="" rowspan="">A name for the payload type</td>
      <td colspan="" rowspan="">string</td>
      <td colspan="" rowspan="">RECOMMENDED for static payload types, REQUIRED for dynamic payload types</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">transparent</td>
      <td colspan="" rowspan="">Whether or not a layer is transparent</td>
      <td colspan="" rowspan="">boolean</td>
      <td colspan="" rowspan="">OPTIONAL</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">width</td>
      <td colspan="" rowspan="">The horizontal extent of the displayed video, in pixels</td>
      <td colspan="" rowspan="">positiveInteger</td>
      <td colspan="" rowspan="">RECOMMENDED</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">x</td>
      <td colspan="" rowspan="">The horizontal starting point of a tile, in pixels from the origin point</td>
      <td colspan="" rowspan="">positiveInteger</td>
      <td colspan="" rowspan="">OPTIONAL</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">y</td>
      <td colspan="" rowspan="">The vertical starting point of a tile, in pixels from the origin point</td>
      <td colspan="" rowspan="">positiveInteger</td>
      <td colspan="" rowspan="">OPTIONAL</td>
    </tr>
  </table>
  <p class="" style="">In Jingle Video, the encodings are used in the context of RTP. The most common encodings for the Audio/Video Profile (AVP) of RTP are listed in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3551">RFC 3551</a></span>  [<a href="#nt-id2261734">6</a>] (these "static" types are reserved from payload ID 0 through payload ID 95), although other encodings are allowed (these "dynamic" types use payload IDs 96 to 127) in accordance with the dynamic assignment rules described in Section 3 of <span class="ref">RFC 3551</span>. The payload IDs are represented in the 'id' attribute.</p>
  <p class="" style="">Each &lt;payload-type/&gt; element MAY contain one or more child elements that specify particular parameters related to the payload. For example, as described in <span class="ref" style=""><a href="http://tools.ietf.org/html/draft-ietf-avt-rtp-speex">RTP Payload Format for the Speex Codec</a></span>  [<a href="#nt-id2261789">7</a>], the "cng", "mode", and "vbr" parameters may be specified in relation to usage of the Speex  [<a href="#nt-id2261765">8</a>] codec. Where such parameters are encoded via the "fmtp" SDP attribute, they shall be represented in Jingle via the following format:</p>
  <p class="caption"></p><div class="indent"><pre>
&lt;parameter name='foo' value='bar'/&gt;
  </pre></div>
  <p class="" style="">Note: The parameter names are effectively guaranteed to be unique, since the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-id2261834">9</a>] maintains a registry of SDP parameters (see &lt;<a href="http://www.iana.org/assignments/sdp-parameters">http://www.iana.org/assignments/sdp-parameters</a>&gt;).</p>
<h2>5.
       <a name="negotiation" id="negotiation">Negotiating a Jingle Video Session</a></h2>
  <p class="" style="">When the initiator sends a session-initiate stanza to the responder, the &lt;description/&gt; element includes all of the payload types that the initiator can receive for Jingle video (each one encapsulated in a separate &lt;payload-type/&gt; element):</p>
  <p class="caption"><a name="example-2" id="example-2"></a>Example 2. Initiation</p><div class="indent"><pre>
&lt;iq from='romeo@montague.net/orchard'
    to='juliet@capulet.com/balcony'
    id='jinglevideo1'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:tmp:jingle'&gt;
          action='session-initiate'
          initiator='romeo@montague.net/orchard'
          sid='v1d30k1ll3dth3r4d10st4r'&gt;
    &lt;content content='initiator' name='this-is-the-video-content'&gt;
      &lt;description xmlns='urn:xmpp:tmp:jingle:apps:video-rtp' profile='RTP/AVP'&gt;
        &lt;payload-type id='96' name='theora' clockrate='90000' height='720' width='1280'&gt;
          &lt;parameter name='delivery-method' value='inline'/&gt;
          &lt;parameter name='configuration' value='somebase16string'/&gt;
          &lt;parameter name='sampling' value='YCbCr-4:2:2'/&gt;
        &lt;/payload-type&gt;
        &lt;payload-type id='28' name='nv' clockrate='90000'/&gt;
        &lt;payload-type id='25' name='CelB' clockrate='90000'/&gt;
        &lt;payload-type id='32' name='MPV' clockrate='90000'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:tmp:jingle:transports:ice-tcp'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">Upon receiving the session-initiate stanza, the responder determines whether it can proceed with the negotiation. The general Jingle error cases are specified in <span class="ref">XEP-0166</span> and illustrated <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0167.html">Jingle Audio via RTP</a></span>  [<a href="#nt-id2251104">10</a>]. In addition, the responder must determine if it supports any of the payload types advertised by the initiator; if it supports none of the offered payload types, it must reject the session by returning a &lt;not-acceptable/&gt; error with a Jingle-Video-specific condition of &lt;unsupported-codecs/&gt;:</p>
  <p class="caption"><a name="example-3" id="example-3"></a>Example 3. Responder does not support any of the codecs</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony'
    id='jingleaudio1'
    to='romeo@montague.net/orchard'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;not-acceptable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;unsupported-codecs xmlns='urn:xmpp:tmp:jingle:apps:video:errors'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">If there is no error, the responder acknowledges the session initiation request:</p>
  <p class="caption"><a name="example-4" id="example-4"></a>Example 4. Responder acknowledges session-initiate request</p><div class="indent"><pre>
  &lt;iq from='juliet@capulet.com/balcony'
      id='jinglevideo1'
      to='romeo@montague.net/orchard'
      type='result' /&gt;
  </pre></div>
  <p class="" style="">If the responder wishes to accept the content definition, it MUST send a content-accept action to the initiator, which SHOULD include a list of the payload types that it can receive. The list that the responder sends MAY include any payload types (not a subset of the payload types sent by the initiator) but SHOULD retain the ID numbers specified by the initiator. The order of the &lt;payload-type/&gt; elements indicates the responder's preferences, with the most-preferred types first.</p>
  <p class="caption"><a name="example-5" id="example-5"></a>Example 5. Responder accepts content type</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony'
    to='romeo@montague.net/orchard'
    id='jinglevideo2'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:tmp:jingle'&gt;
          action='content-accept'
          initiator='romeo@montague.net/orchard'
          sid='v1d30k1ll3dth3r4d10st4r'&gt;
    &lt;content content='initiator' name='this-is-the-video-content'&gt;
      &lt;description xmlns='urn:xmpp:tmp:jingle:apps:video-rtp' profile='RTP/AVP'&gt;
        &lt;payload-type id='96' name='theora' height='720' width='1280'&gt;
          &lt;parameter name='delivery-method' value='inline'/&gt;
          &lt;parameter name='configuration' value='somebase16string'/&gt;
          &lt;parameter name='sampling' value='YCbCr-4:2:2'/&gt;
        &lt;/payload-type&gt;
        &lt;payload-type id='32' name='MPV' clockrate='90000'/&gt;
        &lt;payload-type id='33' name='MP2T' clockrate='90000'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:tmp:jingle:transports:ice-tcp'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">The initiator acknowledges the 'content-accept' with an empty IQ result:</p>
  <p class="caption"><a name="example-6" id="example-6"></a>Example 6. Initiator acknowledges modified application type</p><div class="indent"><pre>
  &lt;iq from='romeo@montegue.net/orchard'
      to='juliet@capulet.com/balcony'
      id='jinglevideo2'
      type='result'/&gt;
  </pre></div>
  <p class="" style="">After successful transport negotiation (for the ICE-UDP method, see <span class="ref">XEP-0176</span>), the responder then accepts the session:</p>
  <p class="caption"><a name="example-7" id="example-7"></a>Example 7. Responder definitively accepts the session</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony'
    id='accept1'
    to='romeo@montague.net/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:tmp:jingle'
          action='session-accept'
          initiator='romeo@montague.net/orchard'
          responder='juliet@capulet.com/balcony'
          sid='v1d30k1ll3dth3r4d10st4r'&gt;
    &lt;content content='initiator' name='this-is-the-video-content'&gt;
      &lt;description xmlns='urn:xmpp:tmp:jingle:apps:video-rtp' profile='RTP/AVP'&gt;
        &lt;payload-type id='96' name='theora' height='720' width='1280'&gt;
          &lt;parameter name='delivery-method' value='inline'/&gt;
          &lt;parameter name='configuration' value='somebase16string'/&gt;
          &lt;parameter name='sampling' value='YCbCr-4:2:2'/&gt;
        &lt;/payload-type&gt;
        &lt;payload-type id='32' name='MPV' clockrate='90000'/&gt;
        &lt;payload-type id='33' name='MP2T' clockrate='90000'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:tmp:jingle:transports:ice-tcp'&gt;
        &lt;candidate component='1'
                   foundation='1'
                   generation='0'
                   ip='192.0.2.3'
                   network='1'
                   port='45664'
                   priority='1694498815'
                   protocol='udp'
                   pwd='asd88fgpdd777uzjYhagZg'
                   rel-addr='10.0.1.1'
                   rel-port='8998'
                   rem-addr='192.0.2.1'
                   rem-port='3478'
                   type='srflx'
                   ufrag='8hhy'/&gt;
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">And the initiator acknowledges session acceptance:</p>
  <p class="caption"><a name="example-8" id="example-8"></a>Example 8. Initiator acknowledges session acceptance</p><div class="indent"><pre>
  &lt;iq from='romeo@montague.net/orchard'
      to='juliet@capulet.com/balcony'
      id='accept1'
      type='result' /&gt;
  </pre></div>
  <p class="" style="">Note: For more examples, see <span class="ref">XEP-0167</span>.</p>
<h2>6.
       <a name="sdp" id="sdp">Mapping to Session Description Protocol</a></h2>
  <p class="" style="">The SDP media type for Jingle Video via RTP is "video" (see Section 8.2.1 of <span class="ref">RFC 4566</span>).</p>
  <p class="" style="">If the payload type is static (payload-type IDs 0 through 95 inclusive), it MUST be mapped to a media field defined in <span class="ref">RFC 4566</span>. The generic format for the media field is as follows:</p>
  <p class="caption"></p><div class="indent"><pre>
m=&lt;media&gt; &lt;port&gt; &lt;transport&gt; &lt;fmt list&gt;
  </pre></div>
  <p class="" style="">In the context of Jingle video sessions, the &lt;media&gt; is "video", the &lt;port&gt; is the preferred port for such communications (which may be determined dynamically), the &lt;transport&gt; is whatever profile is negotiated via the 'profile' attribute of the &lt;content/&gt; element in the Jingle negotiation (e.g., "RTP/AVT"), and the &lt;fmt list&gt; is the payload-type ID.</p>
  <p class="" style="">For example, consider the following static payload-type:</p>
  <p class="caption"><a name="example-9" id="example-9"></a>Example 9. Jingle format for static payload-type</p><div class="indent"><pre>
&lt;payload-type id="28" name="nv"/&gt;
  </pre></div>
  <p class="" style="">That Jingle-formatted information would be mapped to SDP as follows:</p>
  <p class="caption"><a name="example-10" id="example-10"></a>Example 10. SDP mapping of static payload-type</p><div class="indent"><pre>
m=video 9000 RTP/AVP 28
  </pre></div>
  <p class="" style="">If the payload type is dynamic (payload-type IDs 96 through 127 inclusive), it SHOULD be mapped to an SDP media field plus an SDP attribute field named "rtpmap".</p>
  <p class="" style="">For example, consider a VC-1 payload such as that described in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc4425">RFC 4425</a></span>  [<a href="#nt-id2262364">11</a>]:</p>
  <p class="caption"><a name="example-11" id="example-11"></a>Example 11. Jingle format for dynamic payload-type</p><div class="indent"><pre>
&lt;payload-type id='98' name='vc1' height='288' width='352'/&gt;
  </pre></div>
  <p class="" style="">That Jingle-formatted information would be mapped to SDP as follows:</p>
  <p class="caption"><a name="example-12" id="example-12"></a>Example 12. SDP mapping of dynamic payload-type</p><div class="indent"><pre>
m=video 49170 RTP/AVP 98
a=rtpmap:98 vc1/90000
a=fmtp:98 width=352;height=288;
  </pre></div>
  <p class="" style="">As noted, if additional parameters are to be specified, they shall be represented as attributes of the &lt;payload-type/&gt; element or its child &lt;parameter/&gt; element, as in the following example.</p>
  <p class="caption"><a name="example-13" id="example-13"></a>Example 13. Jingle format for dynamic payload-type with parameters</p><div class="indent"><pre>
&lt;payload-type id='96' name='theora' height='720' width='1280'&gt;
  &lt;parameter name='delivery-method' value='inline'/&gt;
  &lt;parameter name='configuration' value='somebase16string'/&gt;
  &lt;parameter name='sampling' value='YCbCr-4:2:2'/&gt;
&lt;/payload-type&gt;
  </pre></div>
  <p class="" style="">That Jingle-formatted information would be mapped to SDP as follows:</p>
  <p class="caption"><a name="example-14" id="example-14"></a>Example 14. SDP mapping of dynamic payload-type with parameters</p><div class="indent"><pre>
m=video 49170 RTP/AVP 98
a=rtpmap:96 theora/90000
a=fmtp:96 sampling=YCbCr-4:2:2; width=1280; height=720;
delivery-method=inline; configuration=somebase16string;
  </pre></div>
<h2>7.
       <a name="errors" id="errors">Error Handling</a></h2>
  <p class="" style="">The Jingle-Video-specific error conditions are as follows:</p>
  <p class="caption"><a name="table-2" id="table-2"></a>Table 2: Other Error Conditions</p><table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Jingle Video Condition</th>
      <th colspan="" rowspan="">XMPP Condition</th>
      <th colspan="" rowspan="">Description</th>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">&lt;unsupported-codecs/&gt;</td>
      <td colspan="" rowspan="">&lt;not-acceptable/&gt;</td>
      <td colspan="" rowspan="">The recipient does not support any of the offered video encodings.</td>
    </tr>
  </table>
<h2>8.
       <a name="support" id="support">Determining Support</a></h2>
  <p class="" style="">If an entity supports Jingle video exchanges via RTP, it MUST advertise that fact by returning a feature of "urn:xmpp:tmp:jingle:apps:video" in response to <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0030.html">Service Discovery</a></span>  [<a href="#nt-id2262553">12</a>] information requests (see <a href="#ns">Protocol Namespaces</a> regarding issuance of one or more permanent namespaces).</p>
  <p class="caption"><a name="example-15" id="example-15"></a>Example 15. Service discovery information request</p><div class="indent"><pre>
&lt;iq from='romeo@montague.net/orchard'
    id='disco1'
    to='juliet@capulet.com/balcony'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="caption"><a name="example-16" id="example-16"></a>Example 16. Service discovery information response</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony'
    id='disco1'
    to='romeo@montague.net/orchard'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    ...
    &lt;feature var='urn:xmpp:tmp:jingle'/&gt;
    &lt;feature var='urn:xmpp:tmp:jingle:apps:video-rtp'/&gt;
    ...
  &lt;/query&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">Naturally, support may also be discovered via the dynamic, presence-based profile of service discovery defined in <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0115.html">Entity Capabilities</a></span>  [<a href="#nt-id2262615">13</a>].</p>
<h2>9.
       <a name="info" id="info">Informational Messages</a></h2>
  <p class="" style="">Informational messages may be sent by either party within the context of Jingle to communicate the status of a Jingle video session, device, or principal. The informational message MUST be an IQ-set containing a &lt;jingle/&gt; element of type "session-info". No informational message payload elements have yet been defined for Jingle Video via RTP, but they may be specified in a future version of this document.</p>
<h2>10.
       <a name="impl" id="impl">Implementation Notes</a></h2>
  <div class="indent"><h3>10.1 <a name="impl-codecs" id="impl-codecs">Codecs</a></h3>
    <p class="" style="">Support for the Theora codec is RECOMMENDED.</p>
  </div>
<h2>11.
       <a name="security" id="security">Security Considerations</a></h2>
  <p class="" style="">In order to secure the data stream, implementations SHOULD use encryption methods appropriate to the transport method and media being exchanged; for example, in the case of UDP, that would include Datagram Transport Layer Security (DTLS) as specified in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc4347">RFC 4347</a></span>  [<a href="#nt-id2262713">14</a>]. <span class="ref" style=""><a href="http://tools.ietf.org/html/draft-fischl-mmusic-sdp-dtls">RTP Over DTLS</a></span>  [<a href="#nt-id2262739">15</a>] defines such methods for the Session Description Protocol; the relevant RTP profile (e.g., "UDP/TLS/RTP/SAVP" for transporting the RTP stream over DTLS with UDP) shall be specified as the value of the &lt;content/&gt; element's 'profile' attribute.</p>
<h2>12.
       <a name="iana" id="iana">IANA Considerations</a></h2>
  <p class="" style="">This document requires no interaction with the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-id2262767">16</a>].</p>
<h2>13.
       <a name="registrar" id="registrar">XMPP Registrar Considerations</a></h2>
  <div class="indent"><h3>13.1 <a name="ns" id="ns">Protocol Namespaces</a></h3>
    <p class="" style="">Until this specification advances to a status of Draft, its associated namespaces shall be:</p>
    <ul class="" style="">
      <li class="" style="">urn:xmpp:tmp:jingle:apps:video</li>
      <li class="" style="">urn:xmpp:tmp:jingle:apps:video:errors</li>
    </ul>
    <p class="" style="">Upon advancement of this specification, the <span class="ref" style=""><a href="http://www.xmpp.org/registrar/">XMPP Registrar</a></span>  [<a href="#nt-id2262861">17</a>] shall issue permanent namespaces in accordance with the process defined in Section 4 of <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0053.html">XMPP Registrar Function</a></span>  [<a href="#nt-id2262893">18</a>].</p>
    <p class="" style="">The following namespaces are requested, and are thought to be unique per the XMPP Registrar's requirements:</p>
    <ul class="" style="">
      <li class="" style="">urn:xmpp:jingle:app:video-rtp</li>
      <li class="" style="">urn:xmpp:jingle:app:video-rtp:errors</li>
    </ul>
  </div>
  <div class="indent"><h3>13.2 <a name="registrar-content" id="registrar-content">Jingle Application Formats</a></h3>
    <p class="" style="">The XMPP Registrar shall include "video-rtp" in its registry of Jingle application formats. The registry submission is as follows:</p>
    <p class="caption"></p><div class="indent"><pre>
&lt;application&gt;
  &lt;name&gt;video-rtp&lt;/name&gt;
  &lt;desc&gt;Jingle sessions that support video exchange via the Real-time Transport Protocol&lt;/desc&gt;
  &lt;transport&gt;lossy&lt;/transport&gt;
  &lt;doc&gt;XEP-0180&lt;/doc&gt;
&lt;/application&gt;
    </pre></div>
  </div>
<h2>14.
       <a name="schema" id="schema">XML Schemas</a></h2>
  <div class="indent"><h3>14.1 <a name="schema-content" id="schema-content">Application Format</a></h3>
    <p class="caption"></p><div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='urn:xmpp:tmp:jingle:apps:video-rtp'
    xmlns='urn:xmpp:tmp:jingle:apps:video-rtp'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='description'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element ref='payload-type' minOccurs='0' maxOccurs='unbounded'/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name='profile' use='optional' type='xs:string'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='payload-type'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
        &lt;xs:element ref='parameter'/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name='channels' type='xs:integer' use='optional' default='1'/&gt;
      &lt;xs:attribute name='clockrate' type='xs:short' use='optional'/&gt;
      &lt;xs:attribute name='height' type='xs:nonNegativeInteger' use='optional'/&gt;
      &lt;xs:attribute name='id' type='xs:unsignedByte' use='required'/&gt;
      &lt;xs:attribute name='layer' type='xs:nonNegativeInteger' use='optional'/&gt;
      &lt;xs:attribute name='name' type='xs:string' use='optional'/&gt;
      &lt;xs:attribute name='transparent' type='xs:boolean' use='optional'/&gt;
      &lt;xs:attribute name='width' type='xs:nonNegativeInteger' use='optional'/&gt;
      &lt;xs:attribute name='x' type='xs:integer' use='optional'/&gt;
      &lt;xs:attribute name='y' type='xs:integer' use='optional'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='parameter'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:simpleContent&gt;
        &lt;xs:extension base='empty'&gt;
          &lt;xs:attribute name='name' type='xs:string' use='required'/&gt;
          &lt;xs:attribute name='value' type='xs:string' use='required'/&gt;
        &lt;/xs:extension&gt;
      &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
  <div class="indent"><h3>14.2 <a name="schema-errors" id="schema-errors">Errors</a></h3>
    <p class="caption"></p><div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='urn:xmpp:tmp:jingle:apps:video:errors'
    xmlns='urn:xmpp:tmp:jingle:apps:video:errors'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='unsupported-codecs' type='empty'/&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
<hr /><h2><a name="notes" id="notes"></a>Notes</h2><div class="indent"><p><a name="nt-id2251388" id="nt-id2251388">1</a>. XEP-0166: Jingle &lt;<a href="http://www.xmpp.org/extensions/xep-0166.html">http://www.xmpp.org/extensions/xep-0166.html</a>&gt;.</p><p><a name="nt-id2251556" id="nt-id2251556">2</a>. RFC 3550: RTP: A Transport Protocol for Real-Time Applications &lt;<a href="http://tools.ietf.org/html/rfc3550">http://tools.ietf.org/html/rfc3550</a>&gt;.</p><p><a name="nt-id2251406" id="nt-id2251406">3</a>. RFC 4566: SDP: Session Description Protocol &lt;<a href="http://tools.ietf.org/html/rfc4566">http://tools.ietf.org/html/rfc4566</a>&gt;.</p><p><a name="nt-id2251514" id="nt-id2251514">4</a>. XEP-0177: Jingle Raw UDP Transport Method &lt;<a href="http://www.xmpp.org/extensions/xep-0177.html">http://www.xmpp.org/extensions/xep-0177.html</a>&gt;.</p><p><a name="nt-id2261195" id="nt-id2261195">5</a>. XEP-0176: Jingle ICE-UDP Transport Method &lt;<a href="http://www.xmpp.org/extensions/xep-0176.html">http://www.xmpp.org/extensions/xep-0176.html</a>&gt;.</p><p><a name="nt-id2261734" id="nt-id2261734">6</a>. RFC 3551: RTP Profile for Audio and Video Conferences with Minimal Control &lt;<a href="http://tools.ietf.org/html/rfc3551">http://tools.ietf.org/html/rfc3551</a>&gt;.</p><p><a name="nt-id2261789" id="nt-id2261789">7</a>. RTP Payload Format for the Speex Codec &lt;<a href="http://tools.ietf.org/html/draft-ietf-avt-rtp-speex">http://tools.ietf.org/html/draft-ietf-avt-rtp-speex</a>&gt;. Work in progress.</p><p><a name="nt-id2261765" id="nt-id2261765">8</a>. See &lt;<a href="http://www.speex.org/">http://www.speex.org/</a>&gt;.</p><p><a name="nt-id2261834" id="nt-id2261834">9</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p><p><a name="nt-id2251104" id="nt-id2251104">10</a>. XEP-0167: Jingle Audio via RTP &lt;<a href="http://www.xmpp.org/extensions/xep-0167.html">http://www.xmpp.org/extensions/xep-0167.html</a>&gt;.</p><p><a name="nt-id2262364" id="nt-id2262364">11</a>. RFC 4425: RTP Payload Format for Video Codec 1 (VC-1) &lt;<a href="http://tools.ietf.org/html/rfc4425">http://tools.ietf.org/html/rfc4425</a>&gt;.</p><p><a name="nt-id2262553" id="nt-id2262553">12</a>. XEP-0030: Service Discovery &lt;<a href="http://www.xmpp.org/extensions/xep-0030.html">http://www.xmpp.org/extensions/xep-0030.html</a>&gt;.</p><p><a name="nt-id2262615" id="nt-id2262615">13</a>. XEP-0115: Entity Capabilities &lt;<a href="http://www.xmpp.org/extensions/xep-0115.html">http://www.xmpp.org/extensions/xep-0115.html</a>&gt;.</p><p><a name="nt-id2262713" id="nt-id2262713">14</a>. RFC 4347: Datagram Transport Layer Security &lt;<a href="http://tools.ietf.org/html/rfc4347">http://tools.ietf.org/html/rfc4347</a>&gt;.</p><p><a name="nt-id2262739" id="nt-id2262739">15</a>. Real-Time Transport Protocol (RTP) over Datagram Transport Layer Security (DTLS) &lt;<a href="http://tools.ietf.org/html/draft-fischl-mmusic-sdp-dtls">http://tools.ietf.org/html/draft-fischl-mmusic-sdp-dtls</a>&gt;. Work in progress.</p><p><a name="nt-id2262767" id="nt-id2262767">16</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p><p><a name="nt-id2262861" id="nt-id2262861">17</a>. The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the XMPP Standards Foundation. For further information, see &lt;<a href="http://www.xmpp.org/registrar/">http://www.xmpp.org/registrar/</a>&gt;.</p><p><a name="nt-id2262893" id="nt-id2262893">18</a>. XEP-0053: XMPP Registrar Function &lt;<a href="http://www.xmpp.org/extensions/xep-0053.html">http://www.xmpp.org/extensions/xep-0053.html</a>&gt;.</p></div><hr /><h2><a name="revs" id="revs"></a>Revision History</h2><div class="indent"><h4>Version 0.11 (2008-02-28)</h4><div class="indent"><p class="" style="">Moved profile attribute from XEP-0166 to this specification.</p> (psa)
    </div><h4>Version 0.10 (2007-11-27)</h4><div class="indent"><p class="" style="">Further editorial review.</p> (psa)
    </div><h4>Version 0.9 (2007-11-15)</h4><div class="indent"><p class="" style="">Editorial review and consistency check.</p> (psa)
    </div><h4>Version 0.8 (2007-05-23)</h4><div class="indent"><p class="" style="">Corrected examples to use video codecs; added clockrate attribute.</p> (psa)
    </div><h4>Version 0.7 (2007-05-23)</h4><div class="indent"><p class="" style="">More completely specified how to include SDP parameters and codec-specific parameters (same approach as in XEP-0167); added and corrected Theora examples.</p> (psa)
    </div><h4>Version 0.6 (2007-04-17)</h4><div class="indent"><p class="" style="">Specified Jingle conformance, including the need to use a lossy transport and the process of sending and receiving video content.</p> (psa)
    </div><h4>Version 0.5 (2007-03-23)</h4><div class="indent"><p class="" style="">Added negotiation flow and SDP mapping; renamed to mention RTP as the associated transport; corrected negotiation flow to be consistent with SIP/SDP (each party specifies a list of the payload types it can receive); added profile attribute to content element in order to specify RTP profile in use.</p> (psa)
    </div><h4>Version 0.4 (2006-12-21)</h4><div class="indent"><p class="" style="">Modified spec to use provisional namespace before advancement to Draft (per XEP-0053).</p> (psa)
    </div><h4>Version 0.3 (2006-08-23)</h4><div class="indent"><p class="" style="">Modified namespace to track XEP-0166.</p> (psa)
    </div><h4>Version 0.2 (2006-07-12)</h4><div class="indent"><p class="" style="">Updated to use content type instead of media type.</p> (psa)
    </div><h4>Version 0.1 (2006-03-23)</h4><div class="indent"><p class="" style="">Initial version.</p> (psa/mc)
    </div><h4>Version 0.0.1 (2006-03-20)</h4><div class="indent"><p class="" style="">First draft.</p> (psa/mc)
    </div></div><hr /><p>END</p></body></html>
